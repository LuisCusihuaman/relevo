```mermaid
stateDiagram-v2
    [*] --> Draft: POST /handovers<br/>(Create)
    
    Draft --> Ready: POST /handovers/{id}/ready<br/>(Mark Ready)
    Ready --> InProgress: POST /handovers/{id}/start<br/>(Start Handover)
    InProgress --> Accepted: POST /handovers/{id}/accept<br/>(Accept)
    Accepted --> Completed: POST /handovers/{id}/complete<br/>(Complete)
    
    Draft --> Cancelled: POST /handovers/{id}/cancel
    Ready --> Cancelled: POST /handovers/{id}/cancel
    InProgress --> Cancelled: POST /handovers/{id}/cancel
    
    InProgress --> Rejected: POST /handovers/{id}/reject<br/>(with reason)
    
    Draft --> Expired: (Automated)<br/>Window passed
    Ready --> Expired: (Automated)<br/>Window passed
    
    Completed --> [*]
    Cancelled --> [*]
    Rejected --> [*]
    Expired --> [*]
    
    note right of Draft
        Initial state when handover created
        CREATED_AT, INITIATED_AT set
    end note
    
    note right of Ready
        Creator marked ready for receiver
        READY_AT set
    end note
    
    note right of InProgress
        Active communication phase
        STARTED_AT set
        Requires READY_AT IS NOT NULL
    end note
    
    note right of Accepted
        Receiver accepted handover
        ACCEPTED_AT set
        Requires STARTED_AT IS NOT NULL ✅
    end note
    
    note right of Completed
        Handover successfully finished
        COMPLETED_AT, COMPLETED_BY set
        Requires ACCEPTED_AT IS NOT NULL ✅
    end note
    
    note right of Cancelled
        Handover cancelled before acceptance
        CANCELLED_AT set
        Only from pre-Accepted states
    end note
    
    note right of Rejected
        Receiver rejected handover
        REJECTED_AT, REJECTION_REASON set
        Only from pre-Accepted states
    end note
    
    note right of Expired
        Handover window passed
        EXPIRED_AT set
        Automated process (not yet implemented)
    end note
```

