-- ESQUEMA DE BASE DE DATOS RELEVO Y DATOS DE SEMILLA
-- Este archivo contiene todas las tablas y datos iniciales para la aplicación RELEVO
-- Ejecutar este script al configurar la base de datos Oracle por primera vez

-- ========================================
-- LIMPIAR TABLAS EXISTENTES (si existen)
-- ========================================

-- Eliminar tablas en orden inverso de dependencias (con manejo de errores)
DECLARE
    table_count NUMBER;
BEGIN
    -- Check and drop HANDOVER_CHECKLISTS
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_CHECKLISTS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_CHECKLISTS CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop HANDOVER_CONTINGENCY
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_CONTINGENCY';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_CONTINGENCY CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop HANDOVER_MESSAGES
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_MESSAGES';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_MESSAGES CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop HANDOVER_MENTIONS
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_MENTIONS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_MENTIONS CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop IPASS_TEMPLATES
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'IPASS_TEMPLATES';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE IPASS_TEMPLATES CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop SECTION_TEMPLATES
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'SECTION_TEMPLATES';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE SECTION_TEMPLATES CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop HANDOVER_ACTIVITY_LOG
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_ACTIVITY_LOG';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_ACTIVITY_LOG CASCADE CONSTRAINTS';
        END IF;
END;
/

DECLARE
    table_count NUMBER;
BEGIN
    -- Check and drop HANDOVER_ACTION_ITEMS
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_ACTION_ITEMS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_ACTION_ITEMS CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop HANDOVERS
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVERS';
    IF table_count > 0 THEN
    EXECUTE IMMEDIATE 'DROP TABLE HANDOVERS CASCADE CONSTRAINTS';
    END IF;

    -- Check and drop CONTRIBUTORS
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'CONTRIBUTORS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE CONTRIBUTORS CASCADE CONSTRAINTS';
        END IF;
END;
/

DECLARE
    table_count NUMBER;
BEGIN
    -- Check and drop existing tables
    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'USER_SESSIONS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE USER_SESSIONS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'USER_PREFERENCES';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE USER_PREFERENCES CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'USER_ASSIGNMENTS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE USER_ASSIGNMENTS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_SYNC_STATUS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_SYNC_STATUS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_SECTIONS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_SECTIONS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'HANDOVER_PARTICIPANTS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE HANDOVER_PARTICIPANTS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'USERS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE USERS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'PATIENTS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE PATIENTS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'SHIFTS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE SHIFTS CASCADE CONSTRAINTS';
    END IF;

    SELECT COUNT(*) INTO table_count FROM USER_TABLES WHERE TABLE_NAME = 'UNITS';
    IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE UNITS CASCADE CONSTRAINTS';
        END IF;
END;
/

BEGIN
    EXECUTE IMMEDIATE 'DROP SEQUENCE CONTRIBUTORS_SEQ';
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE != -2289 THEN
            RAISE;
        END IF;
END;
/

BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE PATIENTS CASCADE CONSTRAINTS';
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE != -942 THEN
            RAISE;
        END IF;
END;
/

BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE SHIFTS CASCADE CONSTRAINTS';
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE != -942 THEN
            RAISE;
        END IF;
END;
/

BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE UNITS CASCADE CONSTRAINTS';
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE != -942 THEN
            RAISE;
        END IF;
END;
/

-- ========================================
-- CREAR TABLAS
-- ========================================

-- Tabla UNITS
CREATE TABLE UNITS (
    ID VARCHAR2(50) PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL,
    DESCRIPTION VARCHAR2(500),
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- Tabla SHIFTS
CREATE TABLE SHIFTS (
    ID VARCHAR2(50) PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL,
    START_TIME VARCHAR2(5) NOT NULL, -- Format: HH:MM
    END_TIME VARCHAR2(5) NOT NULL,   -- Format: HH:MM
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- Tabla PATIENTS
CREATE TABLE PATIENTS (
    ID VARCHAR2(50) PRIMARY KEY,
    NAME VARCHAR2(200) NOT NULL,
    UNIT_ID VARCHAR2(50) NOT NULL,
    DATE_OF_BIRTH DATE,
    GENDER VARCHAR2(20), -- Male, Female, Other, Unknown
    ADMISSION_DATE TIMESTAMP,
    ROOM_NUMBER VARCHAR2(20),
    DIAGNOSIS VARCHAR2(500),
    ALLERGIES VARCHAR2(1000),
    MEDICATIONS VARCHAR2(1000),
    NOTES VARCHAR2(1000),
    MRN VARCHAR2(20), -- Medical Record Number
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_PATIENTS_UNIT FOREIGN KEY (UNIT_ID) REFERENCES UNITS(ID)
);

-- Tabla USER_ASSIGNMENTS (para asignaciones de pacientes a usuarios)
CREATE TABLE USER_ASSIGNMENTS (
    ASSIGNMENT_ID VARCHAR2(255) PRIMARY KEY,
    USER_ID VARCHAR2(255) NOT NULL,
    SHIFT_ID VARCHAR2(50) NOT NULL,
    PATIENT_ID VARCHAR2(50) NOT NULL,
    ASSIGNED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_ASSIGNMENTS_PATIENT FOREIGN KEY (PATIENT_ID) REFERENCES PATIENTS(ID),
    CONSTRAINT FK_ASSIGNMENTS_SHIFT FOREIGN KEY (SHIFT_ID) REFERENCES SHIFTS(ID)
);

-- Tabla CONTRIBUTORS (para funcionalidad existente)
CREATE TABLE CONTRIBUTORS (
    ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(200) NOT NULL,
    EMAIL VARCHAR2(200) NOT NULL,
    PHONE_NUMBER VARCHAR2(20),
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- Sequence para CONTRIBUTORS (Oracle 11g compatible)
CREATE SEQUENCE CONTRIBUTORS_SEQ START WITH 1 INCREMENT BY 1;

-- Trigger para auto-incrementar ID en CONTRIBUTORS
CREATE OR REPLACE TRIGGER CONTRIBUTORS_TRG
BEFORE INSERT ON CONTRIBUTORS
FOR EACH ROW
WHEN (NEW.ID IS NULL)
BEGIN
    SELECT CONTRIBUTORS_SEQ.NEXTVAL INTO :NEW.ID FROM DUAL;
END;
/

-- Tabla HANDOVERS
CREATE TABLE HANDOVERS (
    ID VARCHAR2(50) PRIMARY KEY,
    ASSIGNMENT_ID VARCHAR2(255) NOT NULL, -- FK a USER_ASSIGNMENTS
    PATIENT_ID VARCHAR2(50) NOT NULL,
    STATUS VARCHAR2(20) DEFAULT 'Draft', -- Legacy field, state determined by timestamp fields (Draft, Ready, InProgress, Accepted, Completed, Cancelled, Rejected, Expired)
    ILLNESS_SEVERITY VARCHAR2(20), -- Stable, Watcher, Unstable, Critical
    PATIENT_SUMMARY CLOB,
    SITUATION_AWARENESS_DOC_ID VARCHAR2(100),
    SYNTHESIS CLOB,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    COMPLETED_AT TIMESTAMP,
    SHIFT_NAME VARCHAR2(100),
    FROM_SHIFT_ID VARCHAR2(50), -- Shift being handed over FROM
    TO_SHIFT_ID VARCHAR2(50), -- Shift receiving the handover TO
    FROM_DOCTOR_ID VARCHAR2(255), -- Doctor handing over (Clerk User ID)
    TO_DOCTOR_ID VARCHAR2(255), -- Doctor receiving handover (Clerk User ID)
    RECEIVER_USER_ID VARCHAR2(255), -- Doctor receiving handover (Clerk User ID)
    CREATED_BY VARCHAR2(255), -- Clerk User ID who initiated
    INITIATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP, -- When handover was initiated
    ACCEPTED_AT TIMESTAMP, -- When receiving doctor accepted
    COMPLETED_BY VARCHAR2(255), -- Who completed the handover
    READY_AT         TIMESTAMP,
    STARTED_AT       TIMESTAMP,
    ACKNOWLEDGED_AT  TIMESTAMP, -- Optional: when receiver acknowledges seeing the handover
    CANCELLED_AT     TIMESTAMP,
    REJECTED_AT      TIMESTAMP,
    REJECTION_REASON VARCHAR2(4000),
    EXPIRED_AT       TIMESTAMP,
    HANDOVER_TYPE    VARCHAR2(30),
    HANDOVER_WINDOW_DATE DATE, -- día/ventana del cambio
    CONSTRAINT FK_HANDOVERS_ASSIGNMENT FOREIGN KEY (ASSIGNMENT_ID) REFERENCES USER_ASSIGNMENTS(ASSIGNMENT_ID),
    CONSTRAINT FK_HANDOVERS_PATIENT FOREIGN KEY (PATIENT_ID) REFERENCES PATIENTS(ID),
    CONSTRAINT FK_HANDOVERS_FROM_SHIFT FOREIGN KEY (FROM_SHIFT_ID) REFERENCES SHIFTS(ID),
    CONSTRAINT FK_HANDOVERS_TO_SHIFT FOREIGN KEY (TO_SHIFT_ID) REFERENCES SHIFTS(ID),
    CONSTRAINT chk_handover_type CHECK (HANDOVER_TYPE IN ('ShiftToShift','TemporaryCoverage','Consult'))
);

-- Tabla HANDOVER_ACTION_ITEMS
CREATE TABLE HANDOVER_ACTION_ITEMS (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50) NOT NULL,
    DESCRIPTION VARCHAR2(500) NOT NULL,
    IS_COMPLETED NUMBER(1) DEFAULT 0, -- 0 = false, 1 = true
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    COMPLETED_AT TIMESTAMP,
    CONSTRAINT FK_ACTION_ITEMS_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID)
);

-- Tabla HANDOVER_PARTICIPANTS (participantes activos en un handover)
CREATE TABLE HANDOVER_PARTICIPANTS (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50) NOT NULL,
    USER_ID VARCHAR2(255) NOT NULL, -- Clerk User ID
    USER_NAME VARCHAR2(200) NOT NULL,
    USER_ROLE VARCHAR2(100),
    STATUS VARCHAR2(20) DEFAULT 'active', -- active, inactive, viewing
    JOINED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    LAST_ACTIVITY TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_PARTICIPANTS_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID)
);

-- Tabla HANDOVER_SECTIONS (secciones I-PASS individuales)
CREATE TABLE HANDOVER_SECTIONS (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50) NOT NULL,
    SECTION_TYPE VARCHAR2(20) NOT NULL, -- illness_severity, patient_summary, action_items, situation_awareness, synthesis
    CONTENT CLOB,
    STATUS VARCHAR2(20) DEFAULT 'draft', -- draft, in_progress, completed
    LAST_EDITED_BY VARCHAR2(255), -- Clerk User ID
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_SECTIONS_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID)
);


-- Tabla SYNC_STATUS (estado de sincronización del handover)
CREATE TABLE HANDOVER_SYNC_STATUS (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50) NOT NULL,
    USER_ID VARCHAR2(255) NOT NULL, -- Clerk User ID
    SYNC_STATUS VARCHAR2(20) DEFAULT 'synced', -- synced, syncing, pending, offline, error
    LAST_SYNC TIMESTAMP DEFAULT SYSTIMESTAMP,
    VERSION NUMBER DEFAULT 1,
    CONSTRAINT FK_SYNC_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID),
    CONSTRAINT UK_SYNC_USER_HANDOVER UNIQUE (HANDOVER_ID, USER_ID)
);

-- Tabla USERS (información de usuarios de Clerk)
CREATE TABLE USERS (
    ID VARCHAR2(255) PRIMARY KEY, -- Clerk User ID
    EMAIL VARCHAR2(200) NOT NULL,
    FIRST_NAME VARCHAR2(100),
    LAST_NAME VARCHAR2(100),
    FULL_NAME VARCHAR2(200),
    AVATAR_URL VARCHAR2(500),
    ROLE VARCHAR2(50) DEFAULT 'user', -- admin, doctor, nurse, etc.
    IS_ACTIVE NUMBER(1) DEFAULT 1,
    LAST_LOGIN TIMESTAMP,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- Add foreign key constraints for HANDOVERS table (after USERS table is created)
ALTER TABLE HANDOVERS ADD CONSTRAINT FK_HANDOVERS_FROM_DOCTOR FOREIGN KEY (FROM_DOCTOR_ID) REFERENCES USERS(ID);
ALTER TABLE HANDOVERS ADD CONSTRAINT FK_HANDOVERS_TO_DOCTOR FOREIGN KEY (TO_DOCTOR_ID) REFERENCES USERS(ID);
ALTER TABLE HANDOVERS ADD CONSTRAINT FK_HANDOVERS_COMPLETED_BY FOREIGN KEY (COMPLETED_BY) REFERENCES USERS(ID);
ALTER TABLE HANDOVERS ADD CONSTRAINT FK_HANDOVERS_RECEIVER FOREIGN KEY (RECEIVER_USER_ID) REFERENCES USERS(ID);

-- Tabla PATIENT_SUMMARIES (resúmenes independientes de pacientes)
CREATE TABLE PATIENT_SUMMARIES (
    ID VARCHAR2(50) PRIMARY KEY,
    PATIENT_ID VARCHAR2(50) NOT NULL,
    PHYSICIAN_ID VARCHAR2(255) NOT NULL, -- Clerk User ID del médico asignado
    SUMMARY_TEXT CLOB NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    LAST_EDITED_BY VARCHAR2(255), -- Clerk User ID de quien editó por última vez
    CONSTRAINT FK_PATIENT_SUMMARIES_PATIENT FOREIGN KEY (PATIENT_ID) REFERENCES PATIENTS(ID),
    CONSTRAINT FK_PATIENT_SUMMARIES_PHYSICIAN FOREIGN KEY (PHYSICIAN_ID) REFERENCES USERS(ID),
    CONSTRAINT FK_PATIENT_SUMMARIES_EDITOR FOREIGN KEY (LAST_EDITED_BY) REFERENCES USERS(ID)
);

-- Tabla USER_PREFERENCES (preferencias de usuario)
CREATE TABLE USER_PREFERENCES (
    ID VARCHAR2(50) PRIMARY KEY,
    USER_ID VARCHAR2(255) NOT NULL,
    THEME VARCHAR2(20) DEFAULT 'light',
    LANGUAGE VARCHAR2(10) DEFAULT 'en',
    TIMEZONE VARCHAR2(50) DEFAULT 'UTC',
    NOTIFICATIONS_ENABLED NUMBER(1) DEFAULT 1,
    AUTO_SAVE_ENABLED NUMBER(1) DEFAULT 1,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_USER_PREFERENCES_USER FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

-- Tabla USER_SESSIONS (sesiones activas de usuario)
CREATE TABLE USER_SESSIONS (
    ID VARCHAR2(50) PRIMARY KEY,
    USER_ID VARCHAR2(255) NOT NULL,
    SESSION_START TIMESTAMP DEFAULT SYSTIMESTAMP,
    SESSION_END TIMESTAMP,
    IP_ADDRESS VARCHAR2(45),
    USER_AGENT VARCHAR2(500),
    IS_ACTIVE NUMBER(1) DEFAULT 1,
    CONSTRAINT FK_USER_SESSIONS_USER FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

-- Tabla HANDOVER_CHECKLISTS (listas de verificación para síntesis)
CREATE TABLE HANDOVER_CHECKLISTS (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50) NOT NULL,
    USER_ID VARCHAR2(255) NOT NULL,
    ITEM_ID VARCHAR2(100) NOT NULL,
    ITEM_CATEGORY VARCHAR2(100),
    ITEM_LABEL VARCHAR2(500),
    ITEM_DESCRIPTION VARCHAR2(1000),
    IS_REQUIRED NUMBER(1) DEFAULT 0,
    IS_CHECKED NUMBER(1) DEFAULT 0,
    CHECKED_AT TIMESTAMP,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_CHECKLIST_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID),
    CONSTRAINT FK_CHECKLIST_USER FOREIGN KEY (USER_ID) REFERENCES USERS(ID),
    CONSTRAINT UK_CHECKLIST_ITEM UNIQUE (HANDOVER_ID, USER_ID, ITEM_ID)
);

-- Tabla HANDOVER_CONTINGENCY (planes de contingencia)
CREATE TABLE HANDOVER_CONTINGENCY (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50) NOT NULL,
    CONDITION_TEXT VARCHAR2(1000) NOT NULL,
    ACTION_TEXT VARCHAR2(1000) NOT NULL,
    PRIORITY VARCHAR2(20) DEFAULT 'medium', -- low, medium, high
    STATUS VARCHAR2(20) DEFAULT 'active', -- active, planned, completed
    CREATED_BY VARCHAR2(255) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_CONTINGENCY_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID),
    CONSTRAINT FK_CONTINGENCY_USER FOREIGN KEY (CREATED_BY) REFERENCES USERS(ID)
);

-- Tabla HANDOVER_MESSAGES (mensajes de discusión)
CREATE TABLE HANDOVER_MESSAGES (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50) NOT NULL,
    USER_ID VARCHAR2(255) NOT NULL,
    MESSAGE_TEXT CLOB NOT NULL,
    MESSAGE_TYPE VARCHAR2(20) DEFAULT 'message', -- message, system, notification
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_DISCUSSION_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID),
    CONSTRAINT FK_DISCUSSION_USER FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

-- Tabla HANDOVER_MENTIONS (menciones en mensajes)
CREATE TABLE HANDOVER_MENTIONS (
    ID VARCHAR2(50) PRIMARY KEY,
    MESSAGE_ID VARCHAR2(50) NOT NULL,
    MENTIONED_USER_ID VARCHAR2(255) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_MENTION_MESSAGE FOREIGN KEY (MESSAGE_ID) REFERENCES HANDOVER_MESSAGES(ID),
    CONSTRAINT FK_MENTION_USER FOREIGN KEY (MENTIONED_USER_ID) REFERENCES USERS(ID)
);

-- Tabla IPASS_TEMPLATES (plantillas I-PASS)
CREATE TABLE IPASS_TEMPLATES (
    ID VARCHAR2(50) PRIMARY KEY,
    TEMPLATE_ID VARCHAR2(100) NOT NULL,
    SECTION VARCHAR2(50) NOT NULL, -- illness, patient, actions, awareness, synthesis
    TITLE VARCHAR2(200) NOT NULL,
    TEMPLATE_CONTENT CLOB NOT NULL,
    IS_ACTIVE NUMBER(1) DEFAULT 1,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT UK_TEMPLATE_ID UNIQUE (TEMPLATE_ID)
);

-- Tabla SECTION_TEMPLATES (plantillas de secciones)
CREATE TABLE SECTION_TEMPLATES (
    ID VARCHAR2(50) PRIMARY KEY,
    SECTION_TYPE VARCHAR2(50) NOT NULL, -- patient_summary, situation_awareness, synthesis
    TEMPLATE_NAME VARCHAR2(200) NOT NULL,
    TEMPLATE_CONTENT CLOB NOT NULL,
    IS_DEFAULT NUMBER(1) DEFAULT 0,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- Tabla HANDOVER_ACTIVITY_LOG (registro de actividades)
CREATE TABLE HANDOVER_ACTIVITY_LOG (
    ID VARCHAR2(50) PRIMARY KEY,
    HANDOVER_ID VARCHAR2(50),
    USER_ID VARCHAR2(255),
    ACTIVITY_TYPE VARCHAR2(100) NOT NULL, -- edited_section, added_action_item, sent_message, etc.
    ACTIVITY_DESCRIPTION VARCHAR2(500),
    SECTION_AFFECTED VARCHAR2(50),
    METADATA CLOB, -- JSON with additional activity data
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_ACTIVITY_HANDOVER FOREIGN KEY (HANDOVER_ID) REFERENCES HANDOVERS(ID),
    CONSTRAINT FK_ACTIVITY_USER FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

-- ========================================
-- CREAR ÍNDICES
-- ========================================

CREATE INDEX IDX_PATIENTS_UNIT_ID ON PATIENTS(UNIT_ID);
CREATE INDEX IDX_USER_ASSIGNMENTS_USER ON USER_ASSIGNMENTS(USER_ID);
CREATE INDEX IDX_USER_ASSIGNMENTS_PATIENT ON USER_ASSIGNMENTS(PATIENT_ID);
CREATE INDEX IDX_USER_ASSIGNMENTS_SHIFT ON USER_ASSIGNMENTS(SHIFT_ID);
CREATE INDEX IDX_HANDOVERS_PATIENT_ID ON HANDOVERS(PATIENT_ID);
CREATE INDEX IDX_HANDOVERS_ASSIGNMENT_ID ON HANDOVERS(ASSIGNMENT_ID);
CREATE INDEX IDX_HANDOVERS_STATUS ON HANDOVERS(STATUS);
CREATE INDEX IDX_HANDOVERS_CREATED_BY ON HANDOVERS(CREATED_BY);
CREATE INDEX IDX_HANDOVERS_FROM_DOCTOR ON HANDOVERS(FROM_DOCTOR_ID);
CREATE INDEX IDX_HANDOVERS_TO_DOCTOR ON HANDOVERS(TO_DOCTOR_ID);
CREATE INDEX IDX_HANDOVERS_FROM_SHIFT ON HANDOVERS(FROM_SHIFT_ID);
CREATE INDEX IDX_HANDOVERS_TO_SHIFT ON HANDOVERS(TO_SHIFT_ID);
CREATE INDEX IDX_HANDOVERS_INITIATED_AT ON HANDOVERS(INITIATED_AT);
CREATE INDEX IDX_HANDOVERS_COMPLETED_AT ON HANDOVERS(COMPLETED_AT);
CREATE INDEX IDX_HACTION_HANDOVER_ID ON HANDOVER_ACTION_ITEMS(HANDOVER_ID);
CREATE INDEX IDX_PARTICIPANTS_HANDOVER_ID ON HANDOVER_PARTICIPANTS(HANDOVER_ID);
CREATE INDEX IDX_PARTICIPANTS_USER_ID ON HANDOVER_PARTICIPANTS(USER_ID);
CREATE INDEX IDX_PARTICIPANTS_STATUS ON HANDOVER_PARTICIPANTS(STATUS);
CREATE INDEX IDX_SECTIONS_HANDOVER_ID ON HANDOVER_SECTIONS(HANDOVER_ID);
CREATE INDEX IDX_SECTIONS_TYPE ON HANDOVER_SECTIONS(SECTION_TYPE);
CREATE INDEX IDX_SECTIONS_STATUS ON HANDOVER_SECTIONS(STATUS);
CREATE INDEX IDX_PAT_SUMMARIES_PATIENT ON PATIENT_SUMMARIES(PATIENT_ID);
CREATE INDEX IDX_PAT_SUMMARIES_PHYSICIAN ON PATIENT_SUMMARIES(PHYSICIAN_ID);
CREATE INDEX IDX_PAT_SUMMARIES_CREATED ON PATIENT_SUMMARIES(CREATED_AT);
CREATE INDEX IDX_PAT_SUMMARIES_UPDATED ON PATIENT_SUMMARIES(UPDATED_AT);
CREATE INDEX IDX_SYNC_HANDOVER_ID ON HANDOVER_SYNC_STATUS(HANDOVER_ID);
CREATE INDEX IDX_SYNC_USER_ID ON HANDOVER_SYNC_STATUS(USER_ID);
CREATE INDEX IDX_SYNC_STATUS ON HANDOVER_SYNC_STATUS(SYNC_STATUS);
CREATE INDEX IDX_USERS_EMAIL ON USERS(EMAIL);
CREATE INDEX IDX_USERS_ROLE ON USERS(ROLE);
CREATE INDEX IDX_USERS_IS_ACTIVE ON USERS(IS_ACTIVE);
CREATE INDEX IDX_USER_PREFERENCES_USER_ID ON USER_PREFERENCES(USER_ID);
CREATE INDEX IDX_USER_SESSIONS_USER_ID ON USER_SESSIONS(USER_ID);
CREATE INDEX IDX_USER_SESSIONS_ACTIVE ON USER_SESSIONS(IS_ACTIVE);
CREATE INDEX IDX_CHECKLIST_HANDOVER ON HANDOVER_CHECKLISTS(HANDOVER_ID);
CREATE INDEX IDX_CHECKLIST_USER ON HANDOVER_CHECKLISTS(USER_ID);
CREATE INDEX IDX_CHECKLIST_ITEM ON HANDOVER_CHECKLISTS(ITEM_ID);
CREATE INDEX IDX_CHECKLIST_CHECKED ON HANDOVER_CHECKLISTS(IS_CHECKED);
CREATE INDEX IDX_CONTINGENCY_HANDOVER ON HANDOVER_CONTINGENCY(HANDOVER_ID);
CREATE INDEX IDX_CONTINGENCY_USER ON HANDOVER_CONTINGENCY(CREATED_BY);
CREATE INDEX IDX_CONTINGENCY_STATUS ON HANDOVER_CONTINGENCY(STATUS);
CREATE INDEX IDX_DISCUSSION_HANDOVER ON HANDOVER_MESSAGES(HANDOVER_ID);
CREATE INDEX IDX_DISCUSSION_USER ON HANDOVER_MESSAGES(USER_ID);
CREATE INDEX IDX_DISCUSSION_TYPE ON HANDOVER_MESSAGES(MESSAGE_TYPE);
CREATE INDEX IDX_DISCUSSION_CREATED ON HANDOVER_MESSAGES(CREATED_AT);
CREATE INDEX IDX_MENTION_MESSAGE ON HANDOVER_MENTIONS(MESSAGE_ID);
CREATE INDEX IDX_MENTION_USER ON HANDOVER_MENTIONS(MENTIONED_USER_ID);
-- Note: IDX_IPASS_TEMPLATE_ID index not needed as UK_TEMPLATE_ID unique constraint creates it automatically
CREATE INDEX IDX_IPASS_SECTION ON IPASS_TEMPLATES(SECTION);
CREATE INDEX IDX_IPASS_ACTIVE ON IPASS_TEMPLATES(IS_ACTIVE);
CREATE INDEX IDX_SECTION_TEMPLATE_TYPE ON SECTION_TEMPLATES(SECTION_TYPE);
CREATE INDEX IDX_SECTION_TEMPLATE_DEFAULT ON SECTION_TEMPLATES(IS_DEFAULT);
CREATE INDEX IDX_ACTIVITY_HANDOVER ON HANDOVER_ACTIVITY_LOG(HANDOVER_ID);
CREATE INDEX IDX_ACTIVITY_USER ON HANDOVER_ACTIVITY_LOG(USER_ID);
CREATE INDEX IDX_ACTIVITY_TYPE ON HANDOVER_ACTIVITY_LOG(ACTIVITY_TYPE);
CREATE INDEX IDX_ACTIVITY_CREATED ON HANDOVER_ACTIVITY_LOG(CREATED_AT);

-- Índice único para asegurar un solo handover activo por ventana de traspaso
CREATE UNIQUE INDEX UQ_ACTIVE_HANDOVER_WINDOW
ON HANDOVERS (
  PATIENT_ID,
  HANDOVER_WINDOW_DATE,
  FROM_SHIFT_ID,
  TO_SHIFT_ID,
  CASE
    WHEN COMPLETED_AT IS NULL
     AND CANCELLED_AT IS NULL
     AND REJECTED_AT  IS NULL
     AND EXPIRED_AT   IS NULL
    THEN 1
    ELSE NULL
  END
);

-- ========================================
-- VISTAS
-- ========================================

CREATE OR REPLACE VIEW VW_HANDOVERS_STATE AS
SELECT
  h.ID as HandoverId,
  CASE
    WHEN h.STATUS = 'Completed' AND h.COMPLETED_AT IS NOT NULL THEN 'Completed'
    WHEN h.CANCELLED_AT IS NOT NULL THEN 'Cancelled'
    WHEN h.REJECTED_AT  IS NOT NULL THEN 'Rejected'
    WHEN h.EXPIRED_AT   IS NOT NULL THEN 'Expired'
    WHEN h.ACCEPTED_AT  IS NOT NULL THEN 'Accepted'
    WHEN h.STARTED_AT   IS NOT NULL THEN 'InProgress'
    WHEN h.READY_AT     IS NOT NULL THEN 'Ready'
    ELSE 'Draft'
  END AS StateName
FROM HANDOVERS h;

-- ========================================
-- INSERTAR DATOS DE SEMILLA
-- ========================================

-- Insertar Unidades
INSERT INTO UNITS (ID, NAME, DESCRIPTION) VALUES ('unit-1', 'UCI', 'Unidad de Cuidados Intensivos');
INSERT INTO UNITS (ID, NAME, DESCRIPTION) VALUES ('unit-2', 'Pediatría General', 'Unidad de Pediatría General');
INSERT INTO UNITS (ID, NAME, DESCRIPTION) VALUES ('unit-3', 'Pediatría Especializada', 'Unidad de Pediatría Especializada');

-- Insertar Turnos
INSERT INTO SHIFTS (ID, NAME, START_TIME, END_TIME) VALUES ('shift-day', 'Mañana', '07:00', '15:00');
INSERT INTO SHIFTS (ID, NAME, START_TIME, END_TIME) VALUES ('shift-night', 'Noche', '19:00', '07:00');

-- Insertar Pacientes para Unidad 1 (UCI) - 12 pacientes
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-001', 'María García', 'unit-1', TO_DATE('2010-03-15', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 3, '201', 'Neumonía adquirida en comunidad', 'Penicilina', 'Amoxicilina, Oxígeno suplementario', 'Paciente estable, saturación de oxígeno 94%, requiere nebulizaciones cada 6 horas', 'MRN001234');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-002', 'Carlos Rodríguez', 'unit-1', TO_DATE('2008-07-22', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 5, '202', 'Sepsis secundaria a infección urinaria', 'Sulfonamidas', 'Meropenem, Vasopresores', 'Paciente crítico, requiere monitoreo continuo de signos vitales y soporte hemodinámico', 'MRN001235');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-003', 'Ana López', 'unit-1', TO_DATE('2012-11-08', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 2, '203', 'Estado asmático agudo', 'Ninguna', 'Salbutamol, Corticoides intravenosos', 'Paciente con mejoría progresiva, disminución en requerimiento de oxígeno', 'MRN001236');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-004', 'Miguel Hernández', 'unit-1', TO_DATE('2009-05-30', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 7, '204', 'Trauma craneoencefálico moderado', 'Látex', 'Manitol, Analgésicos', 'Glasgow 12/15, pupilas isocóricas, requiere monitoreo neurológico frecuente', 'MRN001237');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-005', 'Isabella González', 'unit-1', TO_DATE('2011-09-14', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 4, '205', 'Insuficiencia respiratoria aguda', 'Iodo', 'Ventilación mecánica, Sedantes', 'Paciente intubado, parámetros ventilatorios estables', 'MRN001238');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-006', 'David Pérez', 'unit-1', TO_DATE('2013-01-25', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 6, '206', 'Choque séptico', 'Ninguna', 'Antibióticos de amplio espectro, Fluidos', 'Paciente en shock distributivo, requiere soporte vasopresor', 'MRN001239');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-007', 'Sofia Martínez', 'unit-1', TO_DATE('2007-12-03', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 1, '207', 'Meningitis bacteriana', 'Penicilina', 'Ceftriaxona, Dexametasona', 'Paciente con mejoría clínica, cultivos pendientes', 'MRN001240');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-008', 'José Sánchez', 'unit-1', TO_DATE('2014-06-18', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 8, '208', 'Quemaduras de segundo grado', 'Ninguna', 'Analgésicos, Antibióticos tópicos', 'Quemaduras en 25% superficie corporal, requiere curas diarias', 'MRN001241');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-009', 'Carmen Díaz', 'unit-1', TO_DATE('2010-08-12', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 9, '209', 'Convulsiones febriles', 'Ninguna', 'Antiepilépticos, Antipiréticos', 'Paciente estable, sin recurrencia de convulsiones', 'MRN001242');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-010', 'Antonio Moreno', 'unit-1', TO_DATE('2006-04-07', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 12, '210', 'Intoxicación medicamentosa', 'Aspirina', 'Carbón activado, Soporte vital', 'Paciente estabilizado, requiere monitoreo de función hepática', 'MRN001243');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-011', 'Elena Jiménez', 'unit-1', TO_DATE('2012-02-28', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 3, '211', 'Hipoglucemia severa', 'Ninguna', 'Glucosa intravenosa, Insulina', 'Episodio resuelto, requiere educación diabética', 'MRN001244');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-012', 'Francisco Ruiz', 'unit-1', TO_DATE('2008-10-19', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 5, '212', 'Trauma abdominal', 'Ninguna', 'Analgésicos, Antibióticos profilácticos', 'Paciente estable, sin signos de peritonitis', 'MRN001245');
-- Insertar Pacientes para Unidad 2 (Pediatría General) - 12 pacientes
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-013', 'Lucía Álvarez', 'unit-2', TO_DATE('2015-03-12', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 2, '301', 'Bronquiolitis', 'Ninguna', 'Salbutamol, Hidratación', 'Paciente con mejoría respiratoria, buena respuesta al tratamiento', 'MRN001246');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-014', 'Pablo Romero', 'unit-2', TO_DATE('2011-07-08', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 1, '302', 'Gastroenteritis aguda', 'Ninguna', 'Rehidratación oral, Ondansetrón', 'Paciente con buena tolerancia oral, sin vómitos', 'MRN001247');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-015', 'Valentina Navarro', 'unit-2', TO_DATE('2013-11-25', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 3, '303', 'Otitis media aguda', 'Amoxicilina', 'Amoxicilina oral, Analgésicos', 'Paciente afebril, disminución del dolor otológico', 'MRN001248');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-016', 'Diego Torres', 'unit-2', TO_DATE('2009-09-14', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 4, '304', 'Neumonía adquirida en comunidad', 'Ninguna', 'Amoxicilina, Broncodilatadores', 'Paciente afebril, mejoría radiológica en progreso', 'MRN001249');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-017', 'Marta Ramírez', 'unit-2', TO_DATE('2014-05-30', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 2, '305', 'Infección urinaria', 'Sulfonamidas', 'Cefuroxima, Analgésicos', 'Urocultivo positivo, tratamiento dirigido iniciado', 'MRN001250');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-018', 'Adrián Gil', 'unit-2', TO_DATE('2010-12-03', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 5, '306', 'Fractura de antebrazo', 'Codeína', 'Ibuprofeno, Inmovilización', 'Fractura simple, alineación adecuada lograda', 'MRN001251');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-019', 'Clara Serrano', 'unit-2', TO_DATE('2012-08-17', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 1, '307', 'Varicela', 'Ninguna', 'Antihistamínicos, Antipiréticos', 'Lesiones en fase de costra, prurito controlado', 'MRN001252');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-020', 'Hugo Castro', 'unit-2', TO_DATE('2016-01-22', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 3, '308', 'Deshidratación moderada', 'Ninguna', 'Rehidratación intravenosa', 'Paciente hidratado, buena diuresis', 'MRN001253');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-021', 'Natalia Rubio', 'unit-2', TO_DATE('2013-04-09', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 6, '309', 'Apendicitis aguda', 'Ninguna', 'Antibióticos, Analgésicos', 'Paciente postoperatorio, evolución favorable', 'MRN001254');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-022', 'Iván Ortega', 'unit-2', TO_DATE('2008-11-14', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 2, '310', 'Asma agudizada', 'Ninguna', 'Salbutamol, Corticoides', 'Paciente con buen control sintomático', 'MRN001255');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-023', 'Paula Delgado', 'unit-2', TO_DATE('2011-06-27', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 7, '311', 'Faringoamigdalitis', 'Penicilina', 'Azitromicina, Analgésicos', 'Paciente afebril, mejoría de odinofagia', 'MRN001256');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-024', 'Mario Guerrero', 'unit-2', TO_DATE('2014-02-11', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 4, '312', 'Traumatismo craneoencefálico leve', 'Ninguna', 'Analgésicos, Observación', 'Glasgow 15/15, paciente asintomático', 'MRN001257');
-- Insertar Pacientes para Unidad 3 (Pediatría Especializada) - 11 pacientes
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-025', 'Laura Flores', 'unit-3', TO_DATE('2009-07-05', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 10, '401', 'Cardiopatía congénita', 'Ninguna', 'Digoxina, Diuréticos', 'Paciente compensado, requiere seguimiento cardiológico', 'MRN001258');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-026', 'Álvaro Vargas', 'unit-3', TO_DATE('2010-12-18', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 8, '402', 'Diabetes mellitus tipo 1', 'Ninguna', 'Insulina, Control glucémico', 'Buen control metabólico, educación diabética en progreso', 'MRN001259');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-027', 'Cristina Medina', 'unit-3', TO_DATE('2007-09-23', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 15, '403', 'Fibrosis quística', 'Ninguna', 'Antibióticos, Enzimas pancreáticas', 'Paciente estable, requiere fisioterapia respiratoria', 'MRN001260');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-028', 'Sergio Herrera', 'unit-3', TO_DATE('2012-04-30', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 6, '404', 'Trastorno del espectro autista', 'Ninguna', 'No farmacológico', 'Paciente en programa de intervención temprana', 'MRN001261');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-029', 'Alicia Castro', 'unit-3', TO_DATE('2011-08-14', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 12, '405', 'Epilepsia refractaria', 'Ninguna', 'Antiepilépticos múltiples', 'Paciente con control parcial de convulsiones', 'MRN001262');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-030', 'Roberto Vega', 'unit-3', TO_DATE('2008-03-07', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 20, '406', 'Leucemia linfoblástica aguda', 'Ninguna', 'Quimioterapia, Soporte', 'Paciente en protocolo de tratamiento oncológico', 'MRN001263');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-031', 'Beatriz León', 'unit-3', TO_DATE('2013-11-29', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 9, '407', 'Síndrome de Down con cardiopatía', 'Ninguna', 'Medicamentos cardíacos', 'Paciente compensado hemodinámicamente', 'MRN001264');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-032', 'Manuel Peña', 'unit-3', TO_DATE('2006-06-12', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 25, '408', 'Parálisis cerebral', 'Ninguna', 'Antiespásticos, Fisioterapia', 'Paciente en programa de rehabilitación intensiva', 'MRN001265');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-033', 'Silvia Cortés', 'unit-3', TO_DATE('2014-01-16', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 7, '409', 'Prematuridad extrema', 'Ninguna', 'Nutrición especializada, Soporte respiratorio', 'Paciente en seguimiento de desarrollo neurológico', 'MRN001266');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-034', 'Fernando Aguilar', 'unit-3', TO_DATE('2010-05-03', 'YYYY-MM-DD'), 'Male', SYSTIMESTAMP - 11, '410', 'Trastorno de déficit de atención', 'Ninguna', 'Estimulantes, Terapia conductual', 'Paciente con buena respuesta al tratamiento', 'MRN001267');
INSERT INTO PATIENTS (ID, NAME, UNIT_ID, DATE_OF_BIRTH, GENDER, ADMISSION_DATE, ROOM_NUMBER, DIAGNOSIS, ALLERGIES, MEDICATIONS, NOTES, MRN)
VALUES ('pat-035', 'Teresa Santana', 'unit-3', TO_DATE('2009-10-25', 'YYYY-MM-DD'), 'Female', SYSTIMESTAMP - 14, '411', 'Talasemia mayor', 'Ninguna', 'Transfusiones, Quelantes', 'Paciente en programa de trasfusiones crónicas', 'MRN001268');
-- Insertar asignaciones de usuario-paciente-turno (para crear handovers)
INSERT INTO USER_ASSIGNMENTS (ASSIGNMENT_ID, USER_ID, SHIFT_ID, PATIENT_ID, ASSIGNED_AT)
VALUES ('assign-001', 'user_demo12345678901234567890123456', 'shift-day', 'pat-001', SYSTIMESTAMP);

INSERT INTO USER_ASSIGNMENTS (ASSIGNMENT_ID, USER_ID, SHIFT_ID, PATIENT_ID, ASSIGNED_AT)
VALUES ('assign-002', 'user_demo12345678901234567890123456', 'shift-night', 'pat-002', SYSTIMESTAMP - 1);

INSERT INTO USER_ASSIGNMENTS (ASSIGNMENT_ID, USER_ID, SHIFT_ID, PATIENT_ID, ASSIGNED_AT)
VALUES ('assign-003', 'user_demo12345678901234567890123456', 'shift-day', 'pat-003', SYSTIMESTAMP - 2);

INSERT INTO USER_ASSIGNMENTS (ASSIGNMENT_ID, USER_ID, SHIFT_ID, PATIENT_ID, ASSIGNED_AT)
VALUES ('assign-004', 'user_demo12345678901234567890123456', 'shift-night', 'pat-004', SYSTIMESTAMP - 3);

INSERT INTO USER_ASSIGNMENTS (ASSIGNMENT_ID, USER_ID, SHIFT_ID, PATIENT_ID, ASSIGNED_AT)
VALUES ('assign-005', 'user_demo12345678901234567890123456', 'shift-day', 'pat-005', SYSTIMESTAMP - 4);

-- Insertar colaboradores de ejemplo
INSERT INTO CONTRIBUTORS (NAME, EMAIL, PHONE_NUMBER) VALUES ('Dra. María García', 'maria.garcia@hospital.com.ar', '+54-11-555-0123');
INSERT INTO CONTRIBUTORS (NAME, EMAIL, PHONE_NUMBER) VALUES ('Dr. Carlos López', 'carlos.lopez@hospital.com.ar', '+54-11-555-0124');
INSERT INTO CONTRIBUTORS (NAME, EMAIL, PHONE_NUMBER) VALUES ('Dra. Ana Martínez', 'ana.martinez@hospital.com.ar', '+54-11-555-0125');

-- Insertar usuarios de ejemplo
INSERT INTO USERS (ID, EMAIL, FIRST_NAME, LAST_NAME, FULL_NAME, AVATAR_URL, ROLE, IS_ACTIVE, LAST_LOGIN)
VALUES ('user_demo12345678901234567890123456', 'dr.johnson@hospital.com', 'John', 'Johnson', 'Dr. John Johnson', 'https://example.com/avatar1.jpg', 'doctor', 1, SYSTIMESTAMP);

INSERT INTO USERS (ID, EMAIL, FIRST_NAME, LAST_NAME, FULL_NAME, AVATAR_URL, ROLE, IS_ACTIVE, LAST_LOGIN)
VALUES ('user_demo12345678901234567890123457', 'dr.patel@hospital.com', 'Priya', 'Patel', 'Dr. Priya Patel', 'https://example.com/avatar2.jpg', 'doctor', 1, SYSTIMESTAMP);

INSERT INTO USERS (ID, EMAIL, FIRST_NAME, LAST_NAME, FULL_NAME, AVATAR_URL, ROLE, IS_ACTIVE, LAST_LOGIN)
VALUES ('user_demo12345678901234567890123458', 'dr.martinez@hospital.com', 'Carlos', 'Martinez', 'Dr. Carlos Martinez', 'https://example.com/avatar3.jpg', 'doctor', 1, SYSTIMESTAMP);

-- Insertar preferencias de usuario
INSERT INTO USER_PREFERENCES (ID, USER_ID, THEME, LANGUAGE, TIMEZONE, NOTIFICATIONS_ENABLED, AUTO_SAVE_ENABLED)
VALUES ('pref-001', 'user_demo12345678901234567890123456', 'light', 'en', 'America/New_York', 1, 1);

INSERT INTO USER_PREFERENCES (ID, USER_ID, THEME, LANGUAGE, TIMEZONE, NOTIFICATIONS_ENABLED, AUTO_SAVE_ENABLED)
VALUES ('pref-002', 'user_demo12345678901234567890123457', 'dark', 'en', 'America/New_York', 1, 1);

INSERT INTO USER_PREFERENCES (ID, USER_ID, THEME, LANGUAGE, TIMEZONE, NOTIFICATIONS_ENABLED, AUTO_SAVE_ENABLED)
VALUES ('pref-003', 'user_demo12345678901234567890123458', 'light', 'es', 'America/New_York', 1, 1);

-- Insertar sesiones de usuario activas
INSERT INTO USER_SESSIONS (ID, USER_ID, IP_ADDRESS, USER_AGENT, IS_ACTIVE)
VALUES ('session-001', 'user_demo12345678901234567890123456', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36', 1);

INSERT INTO USER_SESSIONS (ID, USER_ID, IP_ADDRESS, USER_AGENT, IS_ACTIVE)
VALUES ('session-002', 'user_demo12345678901234567890123457', '192.168.1.101', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36', 1);

COMMIT;

-- Insertar handover de ejemplo
INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-001', 'assign-001', 'pat-001', 'Ready', 'Stable',
        'Paciente de 14 años con neumonía adquirida en comunidad. Estable, saturación de oxígeno 94%, requiere nebulizaciones cada 6 horas.',
        'doc-001',
        'Paciente estable, evolución favorable. Continuar tratamiento actual.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE), SYSTIMESTAMP - INTERVAL '30' MINUTE);

-- Insertar handovers adicionales para todos los pacientes
INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-002', 'assign-002', 'pat-002', 'Ready', 'Critical',
        'Paciente de 12 años con sepsis secundaria a infección urinaria. Paciente crítico, requiere monitoreo continuo.',
        'doc-002',
        'Paciente en estado crítico. Continuar soporte vasopresor y antibióticos.',
        'Noche → Mañana', 'shift-night', 'shift-day', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123458', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 1, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-003', 'assign-003', 'pat-003', 'Ready', 'Unstable',
        'Paciente de 13 años con estado asmático agudo. Mejoría progresiva, disminución en requerimiento de oxígeno.',
        'doc-003',
        'Mejoría respiratoria evidente. Continuar tratamiento actual con reducción gradual.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 2, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-004', 'assign-004', 'pat-004', 'Ready', 'Unstable',
        'Paciente de 13 años con trauma craneoencefálico moderado. Glasgow 12/15, requiere monitoreo neurológico.',
        'doc-004',
        'Estable neurológicamente. Continuar monitoreo frecuente y evaluación neuroquirúrgica.',
        'Noche → Mañana', 'shift-night', 'shift-day', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123458', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 3, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-005', 'assign-005', 'pat-005', 'Ready', 'Critical',
        'Paciente de 13 años con insuficiencia respiratoria aguda. Ventilación mecánica invasiva.',
        'doc-005',
        'Parámetros ventilatorios estables. Continuar sedación y monitoreo continuo.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 4, SYSTIMESTAMP - INTERVAL '30' MINUTE);

-- Crear handovers adicionales para todos los pacientes restantes
INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-006', 'assign-001', 'pat-006', 'Ready', 'Critical',
        'Paciente de 11 años con choque séptico. Antibióticos de amplio espectro y soporte hemodinámico.',
        'doc-006',
        'Paciente en shock distributivo, requiere soporte vasopresor continuo.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 5, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-007', 'assign-002', 'pat-007', 'Ready', 'Unstable',
        'Paciente de 16 años con meningitis bacteriana. Ceftriaxona y dexametasona.',
        'doc-007',
        'Paciente con mejoría clínica, cultivos pendientes de resultado.',
        'Noche → Mañana', 'shift-night', 'shift-day', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123458', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 6, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-008', 'assign-003', 'pat-008', 'Ready', 'Unstable',
        'Paciente de 10 años con quemaduras de segundo grado en 25% de superficie corporal.',
        'doc-008',
        'Quemaduras extensas requieren curas diarias y analgesia adecuada.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 7, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-009', 'assign-004', 'pat-009', 'Ready', 'Stable',
        'Paciente de 14 años con convulsiones febriles. Antiepilépticos y antipiréticos.',
        'doc-009',
        'Paciente estable, sin recurrencia de convulsiones.',
        'Noche → Mañana', 'shift-night', 'shift-day', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123458', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 8, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-010', 'assign-005', 'pat-010', 'Ready', 'Unstable',
        'Paciente de 17 años con intoxicación medicamentosa. Carbón activado y soporte vital.',
        'doc-010',
        'Paciente estabilizado, requiere monitoreo de función hepática.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 9, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-011', 'assign-001', 'pat-011', 'Ready', 'Stable',
        'Paciente de 13 años con hipoglucemia severa. Glucosa intravenosa e insulina.',
        'doc-011',
        'Episodio resuelto, requiere educación diabética.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 10, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-012', 'assign-002', 'pat-012', 'Ready', 'Stable',
        'Paciente de 12 años con trauma abdominal. Analgésicos y antibióticos profilácticos.',
        'doc-012',
        'Paciente estable, sin signos de peritonitis.',
        'Noche → Mañana', 'shift-night', 'shift-day', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123458', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 11, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-013', 'assign-003', 'pat-013', 'Ready', 'Stable',
        'Paciente de 8 años con bronquiolitis. Salbutamol y hidratación.',
        'doc-013',
        'Paciente con mejoría respiratoria, buena respuesta al tratamiento.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 12, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-014', 'assign-004', 'pat-014', 'Ready', 'Stable',
        'Paciente de 15 años con apendicitis aguda. Preparado para apendicectomía.',
        'doc-014',
        'Paciente en espera de cirugía, mantener en ayunas.',
        'Noche → Mañana', 'shift-night', 'shift-day', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123458', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 13, SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('handover-015', 'assign-005', 'pat-015', 'Ready', 'Stable',
        'Paciente de 9 años con fractura de fémur. Tracción esquelética.',
        'doc-015',
        'Paciente con buen control del dolor, requiere vigilancia neurovascular.',
        'Mañana → Noche', 'shift-day', 'shift-night', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TRUNC(SYSDATE) - 14, SYSTIMESTAMP - INTERVAL '30' MINUTE);

COMMIT;

-- Insertar action items del handover
INSERT INTO HANDOVER_ACTION_ITEMS (ID, HANDOVER_ID, DESCRIPTION, IS_COMPLETED)
VALUES ('action-001', 'handover-001', 'Realizar nebulizaciones cada 6 horas', 0);

INSERT INTO HANDOVER_ACTION_ITEMS (ID, HANDOVER_ID, DESCRIPTION, IS_COMPLETED)
VALUES ('action-002', 'handover-001', 'Monitorear saturación de oxígeno', 0);

INSERT INTO HANDOVER_ACTION_ITEMS (ID, HANDOVER_ID, DESCRIPTION, IS_COMPLETED)
VALUES ('action-003', 'handover-001', 'Control de temperatura cada 4 horas', 1);

-- Insertar participantes del handover
INSERT INTO HANDOVER_PARTICIPANTS (ID, HANDOVER_ID, USER_ID, USER_NAME, USER_ROLE, STATUS)
VALUES ('participant-001', 'handover-001', 'user_demo12345678901234567890123456', 'Dr. John Johnson', 'Day Attending', 'active');

INSERT INTO HANDOVER_PARTICIPANTS (ID, HANDOVER_ID, USER_ID, USER_NAME, USER_ROLE, STATUS)
VALUES ('participant-002', 'handover-001', 'user_demo12345678901234567890123457', 'Dr. Priya Patel', 'Evening Attending', 'active');

INSERT INTO HANDOVER_PARTICIPANTS (ID, HANDOVER_ID, USER_ID, USER_NAME, USER_ROLE, STATUS)
VALUES ('participant-003', 'handover-001', 'user_demo12345678901234567890123458', 'Dr. Carlos Martinez', 'Resident', 'active');

-- Insertar secciones I-PASS del handover
INSERT INTO HANDOVER_SECTIONS (ID, HANDOVER_ID, SECTION_TYPE, CONTENT, STATUS, LAST_EDITED_BY)
VALUES ('section-001', 'handover-001', 'illness_severity', 'Stable - Paciente con evolución favorable', 'completed', 'user_demo12345678901234567890123456');

INSERT INTO HANDOVER_SECTIONS (ID, HANDOVER_ID, SECTION_TYPE, CONTENT, STATUS, LAST_EDITED_BY)
VALUES ('section-002', 'handover-001', 'patient_summary',
        'María García, 14 años, neumonía adquirida en comunidad. Ingreso hace 3 días. Tratamiento con Amoxicilina y oxígeno suplementario.',
        'completed', 'user_demo12345678901234567890123456');

INSERT INTO HANDOVER_SECTIONS (ID, HANDOVER_ID, SECTION_TYPE, CONTENT, STATUS, LAST_EDITED_BY)
VALUES ('section-003', 'handover-001', 'action_items',
        'Nebulizaciones cada 6 horas, monitoreo de saturación de oxígeno, control de temperatura cada 4 horas',
        'in_progress', 'user_demo12345678901234567890123456');

INSERT INTO HANDOVER_SECTIONS (ID, HANDOVER_ID, SECTION_TYPE, CONTENT, STATUS, LAST_EDITED_BY)
VALUES ('section-004', 'handover-001', 'situation_awareness',
        'Paciente estable, sin complicaciones. Buena respuesta al tratamiento antibiótico.',
        'completed', 'user_demo12345678901234567890123456');

INSERT INTO HANDOVER_SECTIONS (ID, HANDOVER_ID, SECTION_TYPE, CONTENT, STATUS, LAST_EDITED_BY)
VALUES ('section-005', 'handover-001', 'synthesis',
        'Continuar tratamiento actual. Alta probable en 48-72 horas si evolución favorable.',
        'draft', 'user_demo12345678901234567890123456');

-- Insertar estado de sincronización
INSERT INTO HANDOVER_SYNC_STATUS (ID, HANDOVER_ID, USER_ID, SYNC_STATUS, VERSION)
VALUES ('sync-001', 'handover-001', 'user_demo12345678901234567890123456', 'synced', 1);

INSERT INTO HANDOVER_SYNC_STATUS (ID, HANDOVER_ID, USER_ID, SYNC_STATUS, VERSION)
VALUES ('sync-002', 'handover-001', 'user_demo12345678901234567890123457', 'syncing', 1);

-- Insertar plantillas I-PASS
INSERT INTO IPASS_TEMPLATES (ID, TEMPLATE_ID, SECTION, TITLE, TEMPLATE_CONTENT, IS_ACTIVE)
VALUES ('template-001', 'illness-update', 'illness', 'Illness Severity Update', 'Patient condition: [condition]\nVital signs: [vitals]\nRecent changes: [changes]\nConcerns: [concerns]', 1);

INSERT INTO IPASS_TEMPLATES (ID, TEMPLATE_ID, SECTION, TITLE, TEMPLATE_CONTENT, IS_ACTIVE)
VALUES ('template-002', 'patient-summary', 'patient', 'Patient Summary Template', 'Patient: [name], [age] years old\nAdmission: [date]\nDiagnosis: [diagnosis]\nCurrent status: [status]', 1);

INSERT INTO IPASS_TEMPLATES (ID, TEMPLATE_ID, SECTION, TITLE, TEMPLATE_CONTENT, IS_ACTIVE)
VALUES ('template-003', 'action-item', 'actions', 'Action Item Template', 'Action: [action]\nPriority: [priority]\nDue: [due_date]\nResponsible: [person]', 1);

INSERT INTO IPASS_TEMPLATES (ID, TEMPLATE_ID, SECTION, TITLE, TEMPLATE_CONTENT, IS_ACTIVE)
VALUES ('template-004', 'situation-awareness', 'awareness', 'Situation Awareness Template', 'Current situation: [situation]\nTeam awareness: [awareness]\nContingency plans: [plans]', 1);

INSERT INTO IPASS_TEMPLATES (ID, TEMPLATE_ID, SECTION, TITLE, TEMPLATE_CONTENT, IS_ACTIVE)
VALUES ('template-005', 'synthesis-note', 'synthesis', 'Synthesis Note Template', 'Key takeaways: [takeaways]\nHandover to: [next_team]\nCritical information: [critical]', 1);

-- Insertar plantillas de secciones
INSERT INTO SECTION_TEMPLATES (ID, SECTION_TYPE, TEMPLATE_NAME, TEMPLATE_CONTENT, IS_DEFAULT)
VALUES ('section-template-001', 'patient_summary', 'Standard Patient Summary',
'Patient Summary:
• Name: [patient_name]
• Age: [patient_age]
• Diagnosis: [diagnosis]
• Current medications: [medications]
• Allergies: [allergies]
• Recent vital signs: [vitals]
• Key concerns: [concerns]', 1);

INSERT INTO SECTION_TEMPLATES (ID, SECTION_TYPE, TEMPLATE_NAME, TEMPLATE_CONTENT, IS_DEFAULT)
VALUES ('section-template-002', 'situation_awareness', 'Standard Situation Awareness',
'Current Situation:
• Patient location: [location]
• Current interventions: [interventions]
• Response to treatment: [response]
• Team communication: [communication]
• Equipment needs: [equipment]
• Family involvement: [family]', 1);

INSERT INTO SECTION_TEMPLATES (ID, SECTION_TYPE, TEMPLATE_NAME, TEMPLATE_CONTENT, IS_DEFAULT)
VALUES ('section-template-003', 'synthesis', 'Standard Synthesis',
'Handover Synthesis:
• Key clinical decisions: [decisions]
• Outstanding tasks: [tasks]
• Follow-up requirements: [followup]
• Communication with family: [family_comm]
• Discharge planning: [discharge]
• Next steps: [next_steps]', 1);

-- Insertar elementos de lista de verificación de confirmación por defecto
INSERT INTO HANDOVER_CHECKLISTS (ID, HANDOVER_ID, USER_ID, ITEM_ID, ITEM_CATEGORY, ITEM_LABEL, ITEM_DESCRIPTION, IS_REQUIRED, IS_CHECKED)
VALUES ('checklist-001', 'handover-001', 'user_demo12345678901234567890123456', 'clinical-status', 'Clinical Status', 'Review clinical data', 'I have reviewed all clinical data and understand the patient''s current condition', 1, 0);

INSERT INTO HANDOVER_CHECKLISTS (ID, HANDOVER_ID, USER_ID, ITEM_ID, ITEM_CATEGORY, ITEM_LABEL, ITEM_DESCRIPTION, IS_REQUIRED, IS_CHECKED)
VALUES ('checklist-002', 'handover-001', 'user_demo12345678901234567890123456', 'medications', 'Medications', 'Understand medications', 'I understand all current medications, dosages, and administration schedules', 1, 0);

INSERT INTO HANDOVER_CHECKLISTS (ID, HANDOVER_ID, USER_ID, ITEM_ID, ITEM_CATEGORY, ITEM_LABEL, ITEM_DESCRIPTION, IS_REQUIRED, IS_CHECKED)
VALUES ('checklist-003', 'handover-001', 'user_demo12345678901234567890123456', 'allergies', 'Safety', 'Note allergies', 'I am aware of all patient allergies and have reviewed allergy protocols', 1, 0);

INSERT INTO HANDOVER_CHECKLISTS (ID, HANDOVER_ID, USER_ID, ITEM_ID, ITEM_CATEGORY, ITEM_LABEL, ITEM_DESCRIPTION, IS_REQUIRED, IS_CHECKED)
VALUES ('checklist-004', 'handover-001', 'user_demo12345678901234567890123456', 'priorities', 'Care Plan', 'Understand priorities', 'I understand the care priorities and treatment plan for this shift', 1, 0);

INSERT INTO HANDOVER_CHECKLISTS (ID, HANDOVER_ID, USER_ID, ITEM_ID, ITEM_CATEGORY, ITEM_LABEL, ITEM_DESCRIPTION, IS_REQUIRED, IS_CHECKED)
VALUES ('checklist-005', 'handover-001', 'user_demo12345678901234567890123456', 'contingency', 'Contingency', 'Aware of contingency plans', 'I am aware of all contingency plans and emergency protocols', 1, 0);

INSERT INTO HANDOVER_CHECKLISTS (ID, HANDOVER_ID, USER_ID, ITEM_ID, ITEM_CATEGORY, ITEM_LABEL, ITEM_DESCRIPTION, IS_REQUIRED, IS_CHECKED)
VALUES ('checklist-006', 'handover-001', 'user_demo12345678901234567890123456', 'communication', 'Communication', 'Know who to contact', 'I know who to contact for questions or concerns during this shift', 1, 0);

-- Insertar algunos mensajes de discusión de ejemplo
INSERT INTO HANDOVER_MESSAGES (ID, HANDOVER_ID, USER_ID, MESSAGE_TEXT, MESSAGE_TYPE, CREATED_AT)
VALUES ('message-001', 'handover-001', 'user_demo12345678901234567890123456', 'Just reviewed the case. The heart failure seems stable today. Any concerns about the fluid balance?', 'message', SYSTIMESTAMP - INTERVAL '5' MINUTE);

INSERT INTO HANDOVER_MESSAGES (ID, HANDOVER_ID, USER_ID, MESSAGE_TEXT, MESSAGE_TYPE, CREATED_AT)
VALUES ('message-002', 'handover-001', 'user_demo12345678901234567890123457', 'Patient has been net negative 500ml today. Responded well to the lasix adjustment this morning. Current weight is down 2kg from admission.', 'message', SYSTIMESTAMP - INTERVAL '3' MINUTE);

INSERT INTO HANDOVER_MESSAGES (ID, HANDOVER_ID, USER_ID, MESSAGE_TEXT, MESSAGE_TYPE, CREATED_AT)
VALUES ('message-003', 'handover-001', 'user_demo12345678901234567890123458', 'Should we continue the current diuretic dose overnight? BUN/Cr stable at 1.2.', 'message', SYSTIMESTAMP - INTERVAL '1' MINUTE);

INSERT INTO HANDOVER_MESSAGES (ID, HANDOVER_ID, USER_ID, MESSAGE_TEXT, MESSAGE_TYPE, CREATED_AT)
VALUES ('message-004', 'handover-001', 'user_demo12345678901234567890123456', 'Agreed, let''s maintain current dose and recheck labs tomorrow morning.', 'message', SYSTIMESTAMP - INTERVAL '30' SECOND);

INSERT INTO HANDOVER_MESSAGES (ID, HANDOVER_ID, USER_ID, MESSAGE_TEXT, MESSAGE_TYPE, CREATED_AT)
VALUES ('message-005', 'handover-001', 'user_demo12345678901234567890123457', 'Family called - they want to discuss the discharge plan. Should I arrange a meeting for tomorrow?', 'message', SYSTIMESTAMP - INTERVAL '15' SECOND);

-- ========================================
-- PLANIFICACIÓN DE CONTINGENCIA EN ESPAÑOL PARA TODOS LOS PACIENTES
-- ========================================

-- Planificación de Contingencia para handover-001 (Paciente con neumonía - pat-001)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-001', 'handover-001', 'Si el paciente desarrolla dificultad respiratoria aguda o saturación de oxígeno < 92%', 'Administrar oxígeno suplementario, llamar a terapia respiratoria, considerar BIPAP, contactar al médico tratante inmediatamente', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-002', 'handover-001', 'Si la temperatura axilar supera los 38.5°C', 'Administrar antipiréticos según protocolo, evaluar foco infeccioso, contactar médico si persiste fiebre', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-003', 'handover-001', 'Si aparecen signos de insuficiencia respiratoria (taquipnea > 30/min, tiraje)', 'Aumentar FiO2, preparar para posible intubación, llamar a intensivista, contactar médico tratante', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-004', 'handover-001', 'Si el paciente presenta reacción alérgica a penicilina', 'Suspender antibiótico inmediatamente, administrar epinefrina si anafilaxia, contactar alergólogo', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '15' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-005', 'handover-001', 'Si no hay mejoría radiológica en 48-72 horas', 'Repetir radiografía de tórax, considerar cambio de antibiótico, consultar infectólogo', 'medium', 'planned', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '10' MINUTE);

-- Planificación de Contingencia para handover-002 (Paciente con sepsis - pat-002)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-006', 'handover-002', 'Si la presión arterial sistólica < 90 mmHg o requiere aumento de vasopresores', 'Aumentar fluidos IV, incrementar dosis de vasopresores, llamar a intensivista, monitoreo continuo', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-007', 'handover-002', 'Si el paciente presenta oliguria (< 1ml/kg/hora) o anuria', 'Evaluar estado de hidratación, ecografía renal, considerar catéter vesical, ajustar fluidos', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-008', 'handover-002', 'Si aparecen nuevos focos infecciosos o empeoramiento clínico', 'Cultivos adicionales, evaluación por imágenes, escalar antibióticos, consultar infectólogo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-009', 'handover-002', 'Si el paciente presenta alteración del estado mental', 'Evaluar causas metabólicas, infección SNC, ajustar sedación, consultar neurología', 'medium', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '15' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-010', 'handover-002', 'Si persiste fiebre > 48 horas con tratamiento antibiótico', 'Repetir hemocultivos, evaluación de foco oculto, cambio empírico de antibióticos', 'medium', 'planned', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '10' MINUTE);

-- Planificación de Contingencia para handover-003 (Paciente con asma - pat-003)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-011', 'handover-003', 'Si el paciente presenta crisis asmática severa con pobre respuesta a tratamiento', 'Administrar adrenalina subcutánea, preparar para intubación, llamar a intensivista', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-012', 'handover-003', 'Si requiere oxígeno suplementario > 2L/min persistentemente', 'Aumentar dosis de corticoides, considerar terapia inhalatoria adicional, evaluación intensiva', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-013', 'handover-003', 'Si aparecen signos de fatiga muscular respiratoria', 'Preparar para ventilación no invasiva, evaluar necesidad de intubación, monitoreo continuo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-014', 'handover-003', 'Si el paciente presenta taquicardia > 150/min persistente', 'Evaluar causa (hipoxemia, ansiedad, efectos medicamentosos), ajustar tratamiento', 'medium', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '15' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-015', 'handover-003', 'Si no hay mejoría clínica en 24 horas', 'Reevaluar tratamiento, considerar inmunomoduladores, consultar alergólogo/inmunólogo', 'medium', 'planned', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '10' MINUTE);

-- Planificación de Contingencia para handover-004 (Paciente con trauma craneoencefálico - pat-004)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-016', 'handover-004', 'Si disminución del nivel de conciencia (Glasgow < 12)', 'Evaluar urgencia neuroquirúrgica, tomografía cerebral inmediata, preparar para cirugía', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-017', 'handover-004', 'Si anisocoria o midriasis unilateral', 'Medición de presión intraocular, evaluación neuroquirúrgica urgente, preparar para cirugía', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-018', 'handover-004', 'Si convulsiones o movimientos anormales', 'Administrar anticonvulsivantes, evaluación neurológica, monitoreo EEG continuo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-019', 'handover-004', 'Si hipertensión endocraneana (presión > 20 mmHg)', 'Aumentar dosis de manitol, hiperventilación, consultar neurocirugía para drenaje', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '15' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-020', 'handover-004', 'Si náuseas o vómitos incoercibles', 'Administrar antieméticos, evaluar aumento de presión endocraneana, monitoreo neurológico', 'medium', 'planned', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '10' MINUTE);

-- Planificación de Contingencia para handover-005 (Paciente con insuficiencia respiratoria - pat-005)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-021', 'handover-005', 'Si desaturación < 88% o desconexión accidental del ventilador', 'Reintubar inmediatamente, verificar parámetros ventilatorios, llamar a intensivista', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-022', 'handover-005', 'Si neumotórax o deterioro respiratorio agudo', 'Drenaje pleural urgente, ajuste ventilatorio, radiografía de tórax inmediata', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-023', 'handover-005', 'Si hemorragia por vía aérea artificial', 'Verificar posición del tubo, aspirar, evaluar sangrado, preparar cambio de tubo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-024', 'handover-005', 'Si agitación o dolor no controlado con sedación actual', 'Aumentar dosis de sedantes, evaluar causa (neumotórax, etc.), consulta anestésica', 'medium', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '15' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-025', 'handover-005', 'Si infección nosocomial o neumonía asociada a ventilador', 'Cultivos bronquiales, antibióticos de amplio espectro, consultar infectólogo', 'medium', 'planned', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '10' MINUTE);

-- Planificación de Contingencia para handover-006 (Paciente con choque séptico - pat-006)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-026', 'handover-006', 'Si hipotensión refractaria (< 65 mmHg) a pesar de vasopresores', 'Escalar vasopresores, evaluar necesidad de balón intraaórtico, consultar cardiología', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-027', 'handover-006', 'Si anuria persistente > 6 horas', 'Iniciar hemodiálisis urgente, evaluar necesidad de catéter venoso central', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-028', 'handover-006', 'Si acidosis láctica > 4 mmol/L', 'Aumentar soporte ventilatorio, evaluar perfusión tisular, considerar bicarbonato', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-007 (Paciente con meningitis - pat-007)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-029', 'handover-007', 'Si deterioro neurológico agudo (disminución Glasgow > 2 puntos)', 'Repetir tomografía cerebral urgente, preparar para intervención neuroquirúrgica', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-030', 'handover-007', 'Si convulsiones recurrentes a pesar de tratamiento', 'Administrar fenitoína en carga, monitoreo EEG continuo, consultar neurología', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-031', 'handover-007', 'Si hipertensión endocraneana (presión > 20 mmHg)', 'Administrar manitol, hiperventilación controlada, preparar para drenaje ventricular', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-008 (Paciente con quemaduras - pat-008)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-032', 'handover-008', 'Si signos de infección en quemaduras (fiebre, eritema, secreción purulenta)', 'Cultivos locales, antibióticos intravenosos, evaluación quirúrgica urgente', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-033', 'handover-008', 'Si dolor incontrolable a pesar de analgesia multimodal', 'Consultar servicio de dolor, evaluar necesidad de sedación profunda', 'medium', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-034', 'handover-008', 'Si hipovolemia por pérdidas insensibles', 'Aumentar fluidos IV según fórmula de Parkland, monitoreo hemodinámico', 'medium', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-009 (Paciente con convulsiones - pat-009)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-035', 'handover-009', 'Si convulsión prolongada (> 5 minutos)', 'Administrar diazepam IV, preparar para intubación, monitoreo post-ictal', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-036', 'handover-009', 'Si estado post-ictal prolongado (> 30 minutos)', 'Evaluar causa metabólica, tomografía cerebral, consulta neurológica', 'medium', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-037', 'handover-009', 'Si recurrencia de convulsiones febriles', 'Repetir estudios etiológicos, considerar profilaxis antiepiléptica', 'medium', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-010 (Paciente con intoxicación - pat-010)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-038', 'handover-010', 'Si deterioro del nivel de conciencia', 'Evaluar Glasgow, soporte ventilatorio, antídoto específico según tóxico', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-039', 'handover-010', 'Si insuficiencia hepática aguda', 'Factor VII recombinante, plasma fresco congelado, consulta hepatología', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-040', 'handover-010', 'Si arritmias cardíacas por toxicidad', 'Antiarrítmicos específicos, monitoreo continuo, consulta cardiología', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-011 (Paciente con hipoglucemia - pat-011)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-041', 'handover-011', 'Si hipoglucemia recurrente (< 60 mg/dL)', 'Ajustar esquema insulínico, evaluar adherencia, consulta endocrinología', 'medium', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-042', 'handover-011', 'Si cetosis o cetoacidosis', 'Insulina intravenosa continua, fluidos, monitoreo gasométrico frecuente', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-043', 'handover-011', 'Si convulsiones por hipoglucemia', 'Glucosa hipertónica IV, benzodiazepinas si convulsiones, evaluación neurológica', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-012 (Paciente con trauma abdominal - pat-012)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-044', 'handover-012', 'Si signos de peritonitis (rigidez abdominal, rebote)', 'Cirugía urgente, antibióticos de amplio espectro, soporte hemodinámico', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-045', 'handover-012', 'Si hipotensión por sangrado interno', 'Fluidos cristaloides, sangre tipo específico, evaluación radiológica urgente', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-046', 'handover-012', 'Si dolor abdominal incontrolable', 'Analgesia multimodal, evaluación por dolor agudo, consulta cirugía', 'medium', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-013 (Paciente con bronquiolitis - pat-013)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-047', 'handover-013', 'Si insuficiencia respiratoria progresiva', 'Oxígeno suplementario, preparar para ventilación no invasiva, consulta intensivista', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-048', 'handover-013', 'Si deshidratación por dificultad respiratoria', 'Fluidos IV, monitoreo electrolitos, ajuste respiratorio para minimizar trabajo', 'medium', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-049', 'handover-013', 'Si apnea o bradicardia', 'Estimulación, ventilación con ambú, preparar para intubación', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-014 (Paciente con gastroenteritis - pat-014)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-050', 'handover-014', 'Si deshidratación severa (pérdida > 10% peso)', 'Fluidos IV isotónicos, monitoreo electrolitos, evaluación cardíaca', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-051', 'handover-014', 'Si vómitos incoercibles a pesar de ondansetrón', 'Antieméticos parenterales, evaluación causa, posible sonda nasogástrica', 'medium', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-052', 'handover-014', 'Si sangre en deposiciones', 'Evaluación endoscópica urgente, antibióticos, monitoreo hemodinámico', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para handover-015 (Paciente con otitis media - pat-015)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-053', 'handover-015', 'Si complicación intracraneal (meningitis, absceso)', 'Antibióticos intravenosos de amplio espectro, evaluación neurológica urgente', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-054', 'handover-015', 'Si mastoiditis aguda', 'Antibióticos intravenosos, evaluación otorrinolaringológica urgente', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-055', 'handover-015', 'Si dolor persistente a pesar de analgesia', 'Reevaluar causa, posible paracentesis, consulta otorrinolaringología', 'medium', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- PLANES DE CONTINGENCIA PARA HANDOVERS DINÁMICOS (hvo-*)
-- Cada handover dinámico usa los mismos planes que su paciente correspondiente

-- Planificación de Contingencia para hvo-2509212155-1155 (José Sánchez - Quemaduras)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-056', 'hvo-2509212155-1155', 'Si signos de infección en quemaduras (fiebre, eritema, secreción purulenta)', 'Cultivos locales, antibióticos intravenosos, evaluación quirúrgica urgente', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-057', 'hvo-2509212155-1155', 'Si dolor incontrolable a pesar de analgesia multimodal', 'Consultar servicio de dolor, evaluar necesidad de sedación profunda', 'medium', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-058', 'hvo-2509212155-1155', 'Si hipovolemia por pérdidas insensibles', 'Aumentar fluidos IV según fórmula de Parkland, monitoreo hemodinámico', 'medium', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-1879 (Carlos Rodríguez - Sepsis)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-059', 'hvo-2509212155-1879', 'Si la presión arterial sistólica < 90 mmHg o requiere aumento de vasopresores', 'Aumentar fluidos IV, incrementar dosis de vasopresores, llamar a intensivista, monitoreo continuo', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-060', 'hvo-2509212155-1879', 'Si el paciente presenta oliguria (< 1ml/kg/hora) o anuria', 'Evaluar estado de hidratación, ecografía renal, considerar catéter vesical, ajustar fluidos', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-061', 'hvo-2509212155-1879', 'Si aparecen nuevos focos infecciosos o empeoramiento clínico', 'Cultivos adicionales, evaluación por imágenes, escalar antibióticos, consultar infectólogo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-2184 (Carmen Díaz - Convulsiones)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-062', 'hvo-2509212155-2184', 'Si convulsión prolongada (> 5 minutos)', 'Administrar diazepam IV, preparar para intubación, monitoreo post-ictal', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-063', 'hvo-2509212155-2184', 'Si estado post-ictal prolongado (> 30 minutos)', 'Evaluar causa metabólica, tomografía cerebral, consulta neurológica', 'medium', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-064', 'hvo-2509212155-2184', 'Si recurrencia de convulsiones febriles', 'Repetir estudios etiológicos, considerar profilaxis antiepiléptica', 'medium', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-2333 (Isabella González - Insuficiencia respiratoria)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-065', 'hvo-2509212155-2333', 'Si desaturación < 88% o desconexión accidental del ventilador', 'Reintubar inmediatamente, verificar parámetros ventilatorios, llamar a intensivista', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-066', 'hvo-2509212155-2333', 'Si neumotórax o deterioro respiratorio agudo', 'Drenaje pleural urgente, ajuste ventilatorio, radiografía de tórax inmediata', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-067', 'hvo-2509212155-2333', 'Si hemorragia por vía aérea artificial', 'Verificar posición del tubo, aspirar, evaluar sangrado, preparar cambio de tubo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-2356 (Miguel Hernández - Trauma craneoencefálico)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-068', 'hvo-2509212155-2356', 'Si disminución del nivel de conciencia (Glasgow < 12)', 'Evaluar urgencia neuroquirúrgica, tomografía cerebral inmediata, preparar para cirugía', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-069', 'hvo-2509212155-2356', 'Si anisocoria o midriasis unilateral', 'Medición de presión intraocular, evaluación neuroquirúrgica urgente, preparar para cirugía', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-070', 'hvo-2509212155-2356', 'Si convulsiones o movimientos anormales', 'Administrar anticonvulsivantes, evaluación neurológica, monitoreo EEG continuo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-2977 (Elena Jiménez - Hipoglucemia)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-071', 'hvo-2509212155-2977', 'Si hipoglucemia recurrente (< 60 mg/dL)', 'Ajustar esquema insulínico, evaluar adherencia, consulta endocrinología', 'medium', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-072', 'hvo-2509212155-2977', 'Si cetosis o cetoacidosis', 'Insulina intravenosa continua, fluidos, monitoreo gasométrico frecuente', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-073', 'hvo-2509212155-2977', 'Si convulsiones por hipoglucemia', 'Glucosa hipertónica IV, benzodiazepinas si convulsiones, evaluación neurológica', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-3050 (David Pérez - Choque séptico)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-074', 'hvo-2509212155-3050', 'Si hipotensión refractaria (< 65 mmHg) a pesar de vasopresores', 'Escalar vasopresores, evaluar necesidad de balón intraaórtico, consultar cardiología', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-075', 'hvo-2509212155-3050', 'Si anuria persistente > 6 horas', 'Iniciar hemodiálisis urgente, evaluar necesidad de catéter venoso central', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-076', 'hvo-2509212155-3050', 'Si acidosis láctica > 4 mmol/L', 'Aumentar soporte ventilatorio, evaluar perfusión tisular, considerar bicarbonato', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-3640 (María García - Neumonía)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-077', 'hvo-2509212155-3640', 'Si el paciente desarrolla dificultad respiratoria aguda o saturación de oxígeno < 92%', 'Administrar oxígeno suplementario, llamar a terapia respiratoria, considerar BIPAP, contactar al médico tratante inmediatamente', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-078', 'hvo-2509212155-3640', 'Si la temperatura axilar supera los 38.5°C', 'Administrar antipiréticos según protocolo, evaluar foco infeccioso, contactar médico si persiste fiebre', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-079', 'hvo-2509212155-3640', 'Si aparecen signos de insuficiencia respiratoria (taquipnea > 30/min, tiraje)', 'Aumentar FiO2, preparar para posible intubación, llamar a intensivista, contactar médico tratante', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-4664 (Antonio Moreno - Intoxicación)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-080', 'hvo-2509212155-4664', 'Si deterioro del nivel de conciencia', 'Evaluar Glasgow, soporte ventilatorio, antídoto específico según tóxico', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-081', 'hvo-2509212155-4664', 'Si insuficiencia hepática aguda', 'Factor VII recombinante, plasma fresco congelado, consulta hepatología', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-082', 'hvo-2509212155-4664', 'Si arritmias cardíacas por toxicidad', 'Antiarrítmicos específicos, monitoreo continuo, consulta cardiología', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-8934 (Ana López - Asma)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-083', 'hvo-2509212155-8934', 'Si el paciente presenta crisis asmática severa con pobre respuesta a tratamiento', 'Administrar adrenalina subcutánea, preparar para intubación, llamar a intensivista', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-084', 'hvo-2509212155-8934', 'Si requiere oxígeno suplementario > 2L/min persistentemente', 'Aumentar dosis de corticoides, considerar terapia inhalatoria adicional, evaluación intensiva', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-085', 'hvo-2509212155-8934', 'Si aparecen signos de fatiga muscular respiratoria', 'Preparar para ventilación no invasiva, evaluar necesidad de intubación, monitoreo continuo', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-9170 (Francisco Ruiz - Trauma abdominal)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-086', 'hvo-2509212155-9170', 'Si signos de peritonitis (rigidez abdominal, rebote)', 'Cirugía urgente, antibióticos de amplio espectro, soporte hemodinámico', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-087', 'hvo-2509212155-9170', 'Si hipotensión por sangrado interno', 'Fluidos cristaloides, sangre tipo específico, evaluación radiológica urgente', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-088', 'hvo-2509212155-9170', 'Si dolor abdominal incontrolable', 'Analgesia multimodal, evaluación por dolor agudo, consulta cirugía', 'medium', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Planificación de Contingencia para hvo-2509212155-9450 (Sofia Martínez - Meningitis)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-089', 'hvo-2509212155-9450', 'Si deterioro neurológico agudo (disminución Glasgow > 2 puntos)', 'Repetir tomografía cerebral urgente, preparar para intervención neuroquirúrgica', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-090', 'hvo-2509212155-9450', 'Si convulsiones recurrentes a pesar de tratamiento', 'Administrar fenitoína en carga, monitoreo EEG continuo, consultar neurología', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-091', 'hvo-2509212155-9450', 'Si hipertensión endocraneana (presión > 20 mmHg)', 'Administrar manitol, hiperventilación controlada, preparar para drenaje ventricular', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

-- Insertar registro de actividad de ejemplo
INSERT INTO HANDOVER_ACTIVITY_LOG (ID, HANDOVER_ID, USER_ID, ACTIVITY_TYPE, ACTIVITY_DESCRIPTION, SECTION_AFFECTED, METADATA, CREATED_AT)
VALUES ('activity-001', 'handover-001', 'user_demo12345678901234567890123456', 'section_updated', 'Updated illness severity section', 'illness_severity', '{"severity": "stable"}', SYSTIMESTAMP - INTERVAL '45' MINUTE);

INSERT INTO HANDOVER_ACTIVITY_LOG (ID, HANDOVER_ID, USER_ID, ACTIVITY_TYPE, ACTIVITY_DESCRIPTION, SECTION_AFFECTED, METADATA, CREATED_AT)
VALUES ('activity-002', 'handover-001', 'user_demo12345678901234567890123457', 'section_updated', 'Updated patient summary with latest vitals', 'patient_summary', '{"vitals_updated": true}', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_ACTIVITY_LOG (ID, HANDOVER_ID, USER_ID, ACTIVITY_TYPE, ACTIVITY_DESCRIPTION, SECTION_AFFECTED, METADATA, CREATED_AT)
VALUES ('activity-003', 'handover-001', 'user_demo12345678901234567890123458', 'action_item_added', 'Added action item for medication review', 'action_items', '{"action_id": "action-001"}', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_ACTIVITY_LOG (ID, HANDOVER_ID, USER_ID, ACTIVITY_TYPE, ACTIVITY_DESCRIPTION, SECTION_AFFECTED, METADATA, CREATED_AT)
VALUES ('activity-004', 'handover-001', 'user_demo12345678901234567890123456', 'message_sent', 'Sent message about fluid balance', null, '{"message_id": "message-001"}', SYSTIMESTAMP - INTERVAL '5' MINUTE);

INSERT INTO HANDOVER_ACTIVITY_LOG (ID, HANDOVER_ID, USER_ID, ACTIVITY_TYPE, ACTIVITY_DESCRIPTION, SECTION_AFFECTED, METADATA, CREATED_AT)
VALUES ('activity-005', 'handover-001', 'user_demo12345678901234567890123457', 'contingency_added', 'Added contingency plan for shortness of breath', null, '{"contingency_id": "contingency-001"}', SYSTIMESTAMP - INTERVAL '30' MINUTE);

-- Insertar resúmenes de pacientes iniciales
INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-001', 'pat-001', 'user_demo12345678901234567890123456', 'Paciente de 14 años con neumonía adquirida en comunidad. Ingreso hace 3 días. Tratamiento con Amoxicilina 500mg cada 8 horas y oxígeno suplementario. Estable, saturación de oxígeno 94%. Requiere nebulizaciones cada 6 horas y monitoreo continuo de signos vitales.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-002', 'pat-002', 'user_demo12345678901234567890123456', 'Paciente de 12 años con sepsis secundaria a infección urinaria. Ingreso hace 5 días. Tratamiento con Meropenem 40mg/kg cada 8 horas y soporte vasopresor con Noradrenalina. Paciente crítico, requiere monitoreo continuo de signos vitales y soporte hemodinámico.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-003', 'pat-003', 'user_demo12345678901234567890123456', 'Paciente de 13 años con estado asmático agudo. Ingreso hace 2 días. Tratamiento con Salbutamol nebulizado cada 4 horas y Corticoides intravenosos. Mejoría progresiva, disminución en requerimiento de oxígeno. Continuar monitoreo respiratorio.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-004', 'pat-004', 'user_demo12345678901234567890123456', 'Paciente de 13 años con trauma craneoencefálico moderado. Ingreso hace 7 días. Tratamiento con Manitol 1g/kg cada 6 horas y analgesia. Glasgow 12/15, pupilas isocóricas. Requiere monitoreo neurológico frecuente y evaluación por neurocirugía.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-005', 'pat-005', 'user_demo12345678901234567890123456', 'Paciente de 13 años con insuficiencia respiratoria aguda. Ingreso hace 4 días. Ventilación mecánica invasiva, parámetros estables. Sedación con Midazolam y analgesia con Fentanilo. Monitoreo continuo en UTI.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-006', 'pat-006', 'user_demo12345678901234567890123456', 'Paciente de 13 años con choque séptico. Ingreso hace 6 días. Antibióticos de amplio espectro y soporte hemodinámico. Requiere vasopresores y monitoreo continuo. Evaluar respuesta antimicrobiana en 48-72 horas.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-007', 'pat-007', 'user_demo12345678901234567890123456', 'Paciente de 16 años con meningitis bacteriana. Ingreso hace 1 día. Tratamiento con Ceftriaxona 100mg/kg cada 12 horas y Dexametasona. Cultivos pendientes. Monitoreo neurológico continuo y evaluación de complicaciones.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-008', 'pat-008', 'user_demo12345678901234567890123456', 'Paciente de 12 años con quemaduras de segundo grado en 25% de superficie corporal. Ingreso hace 8 días. Tratamiento con analgesia y antibióticos tópicos. Curas diarias y evaluación por cirugía plástica. Prevención de infección.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-009', 'pat-009', 'user_demo12345678901234567890123456', 'Paciente de 14 años con convulsiones febriles. Ingreso hace 9 días. Tratamiento con anticonvulsivantes y antipiréticos. Sin recurrencia de convulsiones. Estudio etiológico en curso.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-010', 'pat-010', 'user_demo12345678901234567890123456', 'Paciente de 17 años con intoxicación medicamentosa. Ingreso hace 12 días. Tratamiento con carbón activado y soporte vital. Monitoreo de función hepática y renal. Evaluación psiquiátrica.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-011', 'pat-011', 'user_demo12345678901234567890123456', 'Paciente de 13 años con hipoglucemia severa. Ingreso hace 3 días. Tratamiento con glucosa intravenosa e insulina. Episodio resuelto. Educación diabética y evaluación endocrinológica.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-012', 'pat-012', 'user_demo12345678901234567890123456', 'Paciente de 12 años con trauma abdominal. Ingreso hace 5 días. Tratamiento conservador con analgesia. Sin signos de peritonitis. Monitoreo clínico y evaluación por cirugía.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123456');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-013', 'pat-013', 'user_demo12345678901234567890123457', 'Paciente de 8 años con bronquiolitis. Ingreso hace 2 días. Tratamiento con salbutamol nebulizado y hidratación. Mejoría respiratoria progresiva. Buena respuesta al tratamiento actual.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-014', 'pat-014', 'user_demo12345678901234567890123457', 'Paciente de 11 años con gastroenteritis aguda. Ingreso hace 1 día. Tratamiento con rehidratación oral y ondansetrón. Buena tolerancia oral, sin vómitos. Monitoreo de signos de deshidratación.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-015', 'pat-015', 'user_demo12345678901234567890123457', 'Paciente de 10 años con otitis media aguda. Ingreso hace 3 días. Tratamiento con amoxicilina oral. Paciente afebril, disminución del dolor otológico. Control audiométrico pendiente.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-016', 'pat-016', 'user_demo12345678901234567890123457', 'Paciente de 12 años con neumonía adquirida en comunidad. Ingreso hace 4 días. Tratamiento con amoxicilina. Paciente afebril, mejoría radiológica en progreso. Continuar antibioticoterapia.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-017', 'pat-017', 'user_demo12345678901234567890123457', 'Paciente de 9 años con infección urinaria. Ingreso hace 2 días. Tratamiento con cefuroxima. Urocultivo positivo, tratamiento dirigido iniciado. Control de resolución de síntomas.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-018', 'pat-018', 'user_demo12345678901234567890123457', 'Paciente de 12 años con fractura de antebrazo. Ingreso hace 5 días. Tratamiento con ibuprofeno e inmovilización. Fractura simple, alineación adecuada lograda. Control radiológico pendiente.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-019', 'pat-019', 'user_demo12345678901234567890123457', 'Paciente de 11 años con varicela. Ingreso hace 1 día. Tratamiento con antihistamínicos y antipiréticos. Lesiones en fase de costra, prurito controlado. Prevención de complicaciones bacterianas.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-020', 'pat-020', 'user_demo12345678901234567890123457', 'Paciente de 7 años con deshidratación moderada. Ingreso hace 3 días. Tratamiento con rehidratación intravenosa. Paciente hidratado, buena diuresis. Monitoreo de electrolitos.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-021', 'pat-021', 'user_demo12345678901234567890123457', 'Paciente de 10 años con apendicitis aguda. Ingreso hace 6 días. Tratamiento quirúrgico realizado. Paciente postoperatorio, evolución favorable. Antibióticos profilácticos.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-022', 'pat-022', 'user_demo12345678901234567890123457', 'Paciente de 13 años con asma agudizada. Ingreso hace 2 días. Tratamiento con salbutamol y corticoides. Paciente con buen control sintomático. Educación sobre manejo del asma.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-023', 'pat-023', 'user_demo12345678901234567890123457', 'Paciente de 11 años con faringoamigdalitis. Ingreso hace 7 días. Tratamiento con azitromicina. Paciente afebril, mejoría de odinofagia. Cultivo faríngeo negativo.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-024', 'pat-024', 'user_demo12345678901234567890123457', 'Paciente de 10 años con traumatismo craneoencefálico leve. Ingreso hace 4 días. Tratamiento conservador con analgesia. Glasgow 15/15, paciente asintomático. Observación neurológica.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123457');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-025', 'pat-025', 'user_demo12345678901234567890123458', 'Paciente de 14 años con cardiopatía congénita. Seguimiento en especialidad. Paciente compensado, requiere seguimiento cardiológico. Evaluación ecocardiográfica periódica.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-026', 'pat-026', 'user_demo12345678901234567890123458', 'Paciente de 13 años con diabetes mellitus tipo 1. Control metabólico adecuado. Tratamiento con insulina. Educación diabética en progreso. Monitoreo de HbA1c.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-027', 'pat-027', 'user_demo12345678901234567890123458', 'Paciente de 16 años con fibrosis quística. Seguimiento multidisciplinario. Paciente estable, requiere fisioterapia respiratoria. Tratamiento enzimático y antibiótico profiláctico.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-028', 'pat-028', 'user_demo12345678901234567890123458', 'Paciente de 12 años con trastorno del espectro autista. Seguimiento en programa de intervención temprana. Evaluación multidisciplinaria en curso. Apoyo terapéutico integral.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-029', 'pat-029', 'user_demo12345678901234567890123458', 'Paciente de 11 años con epilepsia refractaria. Tratamiento con múltiples anticonvulsivantes. Paciente con control parcial de convulsiones. Evaluación para cirugía de epilepsia.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-030', 'pat-030', 'user_demo12345678901234567890123458', 'Paciente de 15 años con leucemia linfoblástica aguda. En protocolo de tratamiento oncológico. Soporte hematológico y transfusional. Seguimiento onco-hematológico estricto.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-031', 'pat-031', 'user_demo12345678901234567890123458', 'Paciente de 10 años con síndrome de Down y cardiopatía. Seguimiento cardiológico. Paciente compensado hemodinámicamente. Evaluación genética completa realizada.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-032', 'pat-032', 'user_demo12345678901234567890123458', 'Paciente de 17 años con parálisis cerebral. Programa de rehabilitación intensiva. Tratamiento antiespástico. Evaluación multidisciplinaria para optimización terapéutica.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-033', 'pat-033', 'user_demo12345678901234567890123458', 'Paciente de 9 años con prematuridad extrema. Seguimiento de desarrollo neurológico. Paciente en programa de intervención temprana. Evaluación oftalmológica y auditiva.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-034', 'pat-034', 'user_demo12345678901234567890123458', 'Paciente de 13 años con trastorno de déficit de atención. Tratamiento con estimulantes. Paciente con buena respuesta al tratamiento. Terapia conductual concomitante.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

INSERT INTO PATIENT_SUMMARIES (ID, PATIENT_ID, PHYSICIAN_ID, SUMMARY_TEXT, CREATED_AT, UPDATED_AT, LAST_EDITED_BY)
VALUES ('summary-pat-035', 'pat-035', 'user_demo12345678901234567890123458', 'Paciente de 14 años con talasemia mayor. Programa de transfusiones crónicas. Tratamiento quelante. Seguimiento hematológico y endocrinológico. Prevención de complicaciones.', SYSTIMESTAMP, SYSTIMESTAMP, 'user_demo12345678901234567890123458');

COMMIT;

-- ========================================
-- MIGRATION/CLEANUP SCRIPTS FOR USER ASSIGNMENTS
-- ========================================

-- Script to clean up inconsistent user assignments (run if needed)
-- This removes assignments where the user_id format is inconsistent
/*
DELETE FROM USER_ASSIGNMENTS
WHERE USER_ID NOT LIKE 'user_%'  -- Remove non-Clerk format user IDs
   OR LENGTH(USER_ID) < 10;     -- Remove suspiciously short user IDs
*/

-- Script to update old demo user assignments to use consistent format
/*
UPDATE USER_ASSIGNMENTS
SET USER_ID = 'user_2demo12345678901234567890123456'
WHERE USER_ID = 'demo-user';
*/

-- Script to verify user assignment consistency
/*
SELECT
    USER_ID,
    COUNT(*) as ASSIGNMENT_COUNT,
    CASE
        WHEN USER_ID LIKE 'user_%' THEN 'Clerk Format'
        ELSE 'Other Format'
    END as USER_ID_FORMAT,
    LENGTH(USER_ID) as USER_ID_LENGTH
FROM USER_ASSIGNMENTS
GROUP BY USER_ID
ORDER BY USER_ID;
*/

-- ========================================
-- CONSULTAS DE VERIFICACIÓN
-- ========================================

-- Verificar conteos de tablas
SELECT 'UNITS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM UNITS
UNION ALL
SELECT 'SHIFTS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM SHIFTS
UNION ALL
SELECT 'PATIENTS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM PATIENTS
UNION ALL
SELECT 'USER_ASSIGNMENTS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM USER_ASSIGNMENTS
UNION ALL
SELECT 'CONTRIBUTORS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM CONTRIBUTORS
UNION ALL
SELECT 'HANDOVERS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVERS
UNION ALL
SELECT 'VW_HANDOVERS_STATE' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM VW_HANDOVERS_STATE
UNION ALL
SELECT 'HANDOVER_ACTION_ITEMS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_ACTION_ITEMS
UNION ALL
SELECT 'HANDOVER_PARTICIPANTS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_PARTICIPANTS
UNION ALL
SELECT 'HANDOVER_SECTIONS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_SECTIONS
UNION ALL
SELECT 'PATIENT_SUMMARIES' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM PATIENT_SUMMARIES
UNION ALL
SELECT 'HANDOVER_SYNC_STATUS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_SYNC_STATUS
UNION ALL
SELECT 'USERS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM USERS
UNION ALL
SELECT 'USER_PREFERENCES' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM USER_PREFERENCES
UNION ALL
SELECT 'USER_SESSIONS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM USER_SESSIONS
UNION ALL
SELECT 'HANDOVER_CHECKLISTS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_CHECKLISTS
UNION ALL
SELECT 'HANDOVER_CONTINGENCY' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_CONTINGENCY
UNION ALL
SELECT 'HANDOVER_MESSAGES' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_MESSAGES
UNION ALL
SELECT 'HANDOVER_MENTIONS' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_MENTIONS
UNION ALL
SELECT 'IPASS_TEMPLATES' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM IPASS_TEMPLATES
UNION ALL
SELECT 'SECTION_TEMPLATES' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM SECTION_TEMPLATES
UNION ALL
SELECT 'HANDOVER_ACTIVITY_LOG' AS TABLE_NAME, COUNT(*) AS RECORD_COUNT FROM HANDOVER_ACTIVITY_LOG;

-- Inserción de datos de ejemplo
-- =============================================

-- Handovers para el paciente pat-001 (John Doe)
INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('h-001', 'assignment_pat001_cardiologia', 'pat-001', 'Ready', 'Unstable',
    'John Doe, M, 68. Antecedentes de HTA, DM2, y cardiopatía isquémica con FEVI 35%. Ingresó por SCA sin elevación del ST hace 3 días, manejado con AAS, clopidogrel, enoxaparina y estatinas. Coronariografía ayer mostró enfermedad de 3 vasos no revascularizable percutáneamente. Se discutió con cirugía cardíaca y se aceptó para CRM programada. Durante la noche, presentó episodio de DPN que respondió a furosemida IV. Actualmente con dolor torácico leve, intermitente.',
    'doc-awareness-001',
    'Paciente con enfermedad coronaria severa en espera de cirugía de revascularización. Requiere monitorización hemodinámica estricta y manejo de insuficiencia cardíaca congestiva. Alto riesgo de isquemia recurrente y arritmias ventriculares.',
    'Cardiology Day Shift Handover', 'shift-cardiology-am', 'shift-cardiology-pm', 'user_demo12345678901234567890123456', 'user_demo12345678901234567890123457', 'user_demo12345678901234567890123456', TO_DATE('2023-10-27', 'YYYY-MM-DD'), SYSTIMESTAMP - INTERVAL '1' HOUR
);

-- Planificación de Contingencia para handover-001 (Paciente con neumonía - pat-001)
INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-001', 'h-001', 'Si el paciente desarrolla dificultad respiratoria aguda o saturación de oxígeno < 92%', 'Administrar oxígeno suplementario, llamar a terapia respiratoria, considerar BIPAP, contactar al médico tratante inmediatamente', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '30' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-002', 'h-001', 'Si la temperatura axilar supera los 38.5°C', 'Administrar antipiréticos según protocolo, evaluar foco infeccioso, contactar médico si persiste fiebre', 'high', 'active', 'user_demo12345678901234567890123457', SYSTIMESTAMP - INTERVAL '25' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-003', 'h-001', 'Si aparecen signos de insuficiencia respiratoria (taquipnea > 30/min, tiraje)', 'Aumentar FiO2, preparar para posible intubación, llamar a intensivista, contactar médico tratante', 'high', 'planned', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '20' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-004', 'h-001', 'Si el paciente presenta dolor torácico > 5/10 no controlado con NTG', 'Realizar EKG de 12 derivaciones, administrar morfina, y notificar a cardiología de guardia inmediatamente.', 'high', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '15' MINUTE);

-- Handovers para el paciente pat-002 (Jane Smith)
INSERT INTO HANDOVERS (ID, ASSIGNMENT_ID, PATIENT_ID, STATUS, ILLNESS_SEVERITY, PATIENT_SUMMARY, SITUATION_AWARENESS_DOC_ID, SYNTHESIS, SHIFT_NAME, FROM_SHIFT_ID, TO_SHIFT_ID, FROM_DOCTOR_ID, TO_DOCTOR_ID, CREATED_BY, HANDOVER_WINDOW_DATE, READY_AT)
VALUES ('h-002', 'assignment_pat002_oncologia', 'pat-002', 'InProgress', 'Watcher',
-- ... existing code ...
    'shift-oncology-am', 'shift-oncology-pm', 'user_demo12345678901234567890123458', 'user_demo12345678901234567890123459', 'user_demo12345678901234567890123458', TO_DATE('2023-10-27', 'YYYY-MM-DD'), SYSTIMESTAMP - INTERVAL '45' MINUTE
);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-005', 'h-002', 'Si la paciente presenta fiebre neutropénica (T > 38.3°C o > 38.0°C por 1h)', 'Iniciar protocolo de sepsis, tomar hemocultivos y urocultivo, administrar antibióticos de amplio espectro en la primera hora', 'high', 'active', 'user_demo12345678901234567890123458', SYSTIMESTAMP - INTERVAL '10' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-006', 'h-002', 'Si el recuento de plaquetas cae por debajo de 20,000/µL', 'Preparar para transfusión de plaquetas, evitar procedimientos invasivos, monitorizar signos de sangrado', 'high', 'active', 'user_demo12345678901234567890123459', SYSTIMESTAMP - INTERVAL '5' MINUTE);

INSERT INTO HANDOVER_CONTINGENCY (ID, HANDOVER_ID, CONDITION_TEXT, ACTION_TEXT, PRIORITY, STATUS, CREATED_BY, CREATED_AT)
VALUES ('contingency-007', 'h-002', 'Si la paciente presenta náuseas y vómitos incontrolables (>3 episodios en 1h)', 'Administrar antieméticos de rescate (e.g., olanzapina), asegurar hidratación IV, consultar con farmacia clínica', 'medium', 'active', 'user_demo12345678901234567890123456', SYSTIMESTAMP - INTERVAL '3' MINUTE);
-- ... existing code ...
